<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300..800&display=swap" rel=stylesheet><link rel=stylesheet href=https://aws-controllers-k8s.github.io/community/main.8b089da1410751a603b49ebe0b9cdae122a954f9aed2e69fa8868ae419d857d9427e831419d6d7bd3ada371a74f6961b982ef3bfe899e2458780aa806398f0b7.css integrity="sha512-iwidoUEHUaYDtJ6+C5za4SKpVPmu0uafqIaK5BnYV9lCfoMUGdbXvTraNxp09pYbmC7zv+iZ4kWHgKqAY5jwtw==" crossorigin=anonymous><noscript><style>img.lazyload{display:none}</style></noscript><meta name=robots content="index, follow"><meta name=googlebot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><meta name=bingbot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><title>Deploy PostgreSQL, MySQL, MariaDB Instances Using the ACK RDS Controller - ACK</title><meta name=description content="Create managed PostgreSQL, MySQL, and MariaDB instances in Amazon Relational Database Service (RDS) from a Amazon Elastic Kubernetes Service (EKS) deployment."><link rel=canonical href=https://aws-controllers-k8s.github.io/community/docs/tutorials/rds-example/><meta property="og:locale" content="en_US"><meta property="og:type" content="article"><meta property="og:title" content="Deploy PostgreSQL, MySQL, MariaDB Instances Using the ACK RDS Controller"><meta property="og:description" content="Create managed PostgreSQL, MySQL, and MariaDB instances in Amazon Relational Database Service (RDS) from a Amazon Elastic Kubernetes Service (EKS) deployment."><meta property="og:url" content="https://aws-controllers-k8s.github.io/community/docs/tutorials/rds-example/"><meta property="og:site_name" content="ACK"><meta property="og:image" content="https://aws-controllers-k8s.github.io/community/og.png"><meta property="og:image:alt" content="ACK"><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content="@awscloud"><meta name=twitter:creator content><meta name=twitter:title content="Deploy PostgreSQL, MySQL, MariaDB Instances Using the ACK RDS Controller"><meta name=twitter:description content="Create managed PostgreSQL, MySQL, and MariaDB instances in Amazon Relational Database Service (RDS) from a Amazon Elastic Kubernetes Service (EKS) deployment."><meta name=twitter:image content="https://aws-controllers-k8s.github.io/community/og.png"><meta name=twitter:image:alt content="Deploy PostgreSQL, MySQL, MariaDB Instances Using the ACK RDS Controller"><script type=application/ld+json>{"@context":"https://schema.org","@graph":[{"@type":"Organization","@id":"https://aws-controllers-k8s.github.io/#/schema/organization/1","name":"AWS Controllers for K8s","url":"https://aws-controllers-k8s.github.io/","sameAs":["https://twitter.com/awscloud","https://github.com/aws-controllers-k8s/community"],"logo":{"@type":"ImageObject","@id":"https://aws-controllers-k8s.github.io/#/schema/image/1","url":"https://aws-controllers-k8s.github.io/ack.png","width":512,"height":512,"caption":"AWS Controllers for K8s"},"image":{"@id":"https://aws-controllers-k8s.github.io/#/schema/image/1"}},{"@type":"WebSite","@id":"https://aws-controllers-k8s.github.io/#/schema/website/1","url":"https://aws-controllers-k8s.github.io/","name":"ACK","description":"Doks is a Hugo theme helping you build modern documentation websites that are secure, fast, and SEO-ready â€” by default.","publisher":{"@id":"https://aws-controllers-k8s.github.io/#/schema/organization/1"}},{"@type":"WebPage","@id":"https://aws-controllers-k8s.github.io/community/docs/tutorials/rds-example/","url":"https://aws-controllers-k8s.github.io/community/docs/tutorials/rds-example/","name":"Deploy PostgreSQL, MySQL, MariaDB Instances Using the ACK RDS Controller","description":"Create managed PostgreSQL, MySQL, and MariaDB instances in Amazon Relational Database Service (RDS) from a Amazon Elastic Kubernetes Service (EKS) deployment.","isPartOf":{"@id":"https://aws-controllers-k8s.github.io/#/schema/website/1"},"about":{"@id":"https://aws-controllers-k8s.github.io/#/schema/organization/1"},"datePublished":"0001-01-01T00:00:00CET","dateModified":"0001-01-01T00:00:00CET","breadcrumb":{"@id":"https://aws-controllers-k8s.github.io/community/docs/tutorials/rds-example/#/schema/breadcrumb/1"},"primaryImageOfPage":{"@id":"https://aws-controllers-k8s.github.io/community/docs/tutorials/rds-example/#/schema/image/2"},"inLanguage":"en-US","potentialAction":[{"@type":"ReadAction","target":["https://aws-controllers-k8s.github.io/community/docs/tutorials/rds-example/"]}]},{"@type":"BreadcrumbList","@id":"https://aws-controllers-k8s.github.io/community/docs/tutorials/rds-example/#/schema/breadcrumb/1","name":"Breadcrumbs","itemListElement":[{"@type":"ListItem","position":1,"item":{"@type":"WebPage","@id":"https://aws-controllers-k8s.github.io/community/","url":"https://aws-controllers-k8s.github.io/community/","name":"Home"}},{"@type":"ListItem","position":2,"item":{"@type":"WebPage","@id":"https://aws-controllers-k8s.github.io/community/docs/","url":"https://aws-controllers-k8s.github.io/community/docs/","name":"Docs"}},{"@type":"ListItem","position":3,"item":{"@type":"WebPage","@id":"https://aws-controllers-k8s.github.io/community/docs/tutorials/","url":"https://aws-controllers-k8s.github.io/community/docs/tutorials/","name":"Tutorials"}},{"@type":"ListItem","position":4,"item":{"@id":"https://aws-controllers-k8s.github.io/community/docs/tutorials/rds-example/"}}]},{"@context":"https://schema.org","@graph":[{"@type":"Article","@id":"https://aws-controllers-k8s.github.io/#/schema/article/1","headline":"Deploy PostgreSQL, MySQL, MariaDB Instances Using the ACK RDS Controller","description":"Create managed PostgreSQL, MySQL, and MariaDB instances in Amazon Relational Database Service (RDS) from a Amazon Elastic Kubernetes Service (EKS) deployment.","isPartOf":{"@id":"https://aws-controllers-k8s.github.io/community/docs/tutorials/rds-example/"},"mainEntityOfPage":{"@id":"https://aws-controllers-k8s.github.io/community/docs/tutorials/rds-example/"},"datePublished":"0001-01-01T00:00:00CET","dateModified":"0001-01-01T00:00:00CET","author":{"@id":"https://aws-controllers-k8s.github.io/#/schema/person/2"},"publisher":{"@id":"https://aws-controllers-k8s.github.io/#/schema/organization/1"},"image":{"@id":"https://aws-controllers-k8s.github.io/community/docs/tutorials/rds-example/#/schema/image/2"}}]},{"@context":"https://schema.org","@graph":[{"@type":"Person","@id":"https://aws-controllers-k8s.github.io/#/schema/person/2","name":"AWS","sameAs":["https://twitter.com/awscloud","https://github.com/aws-controllers-k8s"]}]},{"@context":"https://schema.org","@graph":[{"@type":"ImageObject","@id":"https://aws-controllers-k8s.github.io/community/docs/tutorials/rds-example/#/schema/image/2","url":"https://aws-controllers-k8s.github.io/community/og.png","contentUrl":"https://aws-controllers-k8s.github.io/community/og.png","caption":"Deploy PostgreSQL, MySQL, MariaDB Instances Using the ACK RDS Controller"}]}]}</script><meta name=theme-color content="#ff9900"><link rel=apple-touch-icon sizes=180x180 href=https://aws-controllers-k8s.github.io/community/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://aws-controllers-k8s.github.io/community/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://aws-controllers-k8s.github.io/community/favicon-16x16.png><link rel=manifest crossorigin=use-credentials href=https://aws-controllers-k8s.github.io/community/site.webmanifest><link rel=mask-icon color=#5bbad5 href=https://aws-controllers-k8s.github.io/community/safari-pinned-tab.svg><meta name=msapplication-TileColor content="#da532c"><script>(()=>{var b=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,a=localStorage.getItem("theme");b&&a===null&&(localStorage.setItem("theme","dark"),document.documentElement.setAttribute("data-dark-mode","")),b&&a==="dark"&&document.documentElement.setAttribute("data-dark-mode",""),a==="dark"&&document.documentElement.setAttribute("data-dark-mode","")})()</script></head><body class="docs single d-flex flex-column h-100 dark"><div class="header-bar fixed-top"></div><header class="navbar fixed-top navbar-expand-md navbar-light"><div class=container><input class="menu-btn order-0" type=checkbox id=menu-btn>
<label class="menu-icon d-md-none" for=menu-btn><span class=navicon></span></label>
<a class="navbar-brand order-1 order-md-0 me-auto" href=https://aws-controllers-k8s.github.io/community/><span class="navbar-logo logo-light"><svg width="30" height="34" viewBox="0 0 64.386 62.635" xmlns="http://www.w3.org/2000/svg"><path d="m18.112 62.241c-.58208-.2097-1.0825-.38307-1.1121-.38526-.05964-.004-6.9703-8.5523-8.016-9.9151-.3638-.47411-1.8521-2.3244-3.3073-4.1118-6.169-7.5771-5.7671-6.894-5.6043-9.525.07652-1.2369.2681-2.6062.42574-3.0427.15763-.43656.88408-3.4726 1.6143-6.7469s1.4423-6.4294 1.5822-7.0115c.13998-.58209.49521-2.1299.78941-3.4396 1.3414-5.9718 1.3876-6.0514 4.3737-7.5406 1.313-.65484 3.9324-1.927 5.8208-2.8269 1.8885-.89995 6.3475-3.0258 9.9091-4.7242 7.7798-3.7099 7.4615-3.6736 12.178-1.3871 1.6735.81137 4.531 2.1853 6.35 3.0532 1.819.86788 4.4384 2.1189 5.8208 2.78 1.3824.66112 3.7644 1.7868 5.2931 2.5015 2.9983 1.4017 4.0296 2.3189 4.4852 3.9889.24392.89408.61395 2.4653 2.1314 9.0501.28504 1.2369.86914 3.7372 1.298 5.5562s.97374 4.2003 1.2108 5.2917c.2371 1.0914.56563 2.4425.73006 3.0024.50213 1.7098.37232 3.363-.34938 4.4494-.35422.53325-2.549 3.3137-4.8774 6.1788-2.3283 2.8651-4.531 5.6016-4.8948 6.0813-3.5052 4.6213-6.5923 8.1362-7.558 8.6052-1.0278.49922-1.6581.52197-14.155.51087-10.7-.01-13.272-.081-14.138-.39289zm14.42-14.853c1.993-.65861 4.1321-1.8055 5.208-2.7923l.57777-.52995.15829 1.0218c.37804 2.4404.25325 2.3447 3.0582 2.3447h2.5072v-12.965c0-14.742.01357-14.637-2.1954-17.096-2.2207-2.4725-5.3026-3.3183-11.157-3.0616-3.7392.16395-6.9101.77913-9.2875 1.8019l-1.3054.56157v2.2164c0 1.219.0817 2.2164.18156 2.2164s1.0226-.23473 2.0505-.52163c2.4182-.67492 6.8343-1.3304 8.9629-1.3304 2.0099.0 4.3168.63112 5.1681 1.4139 1.22 1.1218 1.459 1.9649 1.5795 5.5722.10844 3.2453.08971 3.4049-.37858 3.2252-.27096-.10398-1.6251-.35976-3.0091-.56841-6.4942-.979-10.999.005-14.067 3.0735-2.0011 2.0011-2.4548 3.2402-2.4641 6.7305-.0065 2.4258.08634 3.1141.55768 4.1334 1.179 2.5499 3.2925 4.2534 5.9416 4.9794 2.3169.63499 5.0434.52227 7.9127-.42589zm-5.3603-4.4174c-1.3419-.50246-1.7811-.90498-2.3487-2.1529-.96238-2.1156-.37837-5.1724 1.2299-6.4375 1.6643-1.3091 6.0181-1.7402 10.183-1.0084l1.7198.30217v6.6092l-1.4496.86623c-3.1522 1.8836-7.1071 2.6552-9.3347 1.8212z" stroke-width=".26458" style="fill:#212529"/><path style="fill:none;stroke-width:.271169" d="m97.026736 181.42372c-11.841729-2.08439-21.332462-9.10215-26.093859-19.29466-1.998022-4.27707-2.054194-4.6839-2.055098-14.88419-841e-6-9.49243.144169-11.16725 1.267846-14.64314 1.712817-5.29828 6.177554-10.936 12.299033-15.53024 2.542552-1.90822 7.390509-4.53026 10.594967-5.73033 8.933335-3.34556 20.674605-4.18152 34.409895-2.44995 4.41785.55695 12.65266 1.97363 14.19738 2.44244 1.76241.53489 1.85502.50959 2.22367-.60744.24279-.73566.28029-2.73516.14369-7.66053-.44788-16.149002-1.23751-19.911778-5.02917-23.965076-1.80821-1.932978-3.56225-2.973051-7.11557-4.219231-5.30124-1.859191-12.26098-2.569875-19.19872-1.960452-10.49153.921594-19.993865 2.573896-30.430988 5.291456l-5.619006 1.463045-.198978-.992725C76.31239 78.136699 76.217381 74.401849 76.210696 70.38303l-.01215-7.306943 3.356503-1.444983c10.517529-4.527823 21.216871-6.656502 37.293351-7.419665 12.51101-.593907 22.76653.582675 29.54824 3.389974 4.64166 1.921419 7.46417 3.920688 11.49419 8.14168 5.92808 6.208991 7.10885 9.292714 7.94906 20.759878.20234 2.761617.35353 19.385439.44083 48.471489l.13286 44.26837-6.87266-.008c-7.35796-.009-10.40797-.26157-11.45694-.94889-1.06894-.70039-1.56607-2.17132-2.37024-7.01314-.41845-2.51943-.81979-4.63975-.89185-4.71182-.0721-.0721-.94053.61073-1.92991 1.51732-2.61666 2.39769-6.17638 4.67392-11.10375 7.10019-7.00303 3.44832-13.15672 5.41292-19.90153 6.35366-4.14851.57862-11.25229.52696-14.85996-.10807zM117.9586 163.14859c7.66738-1.41157 14.24402-3.97835 21.89691-8.5461l3.72858-2.22546v-12.58107c0-11.74762-.0314-12.59038-.47455-12.72168-1.42309-.42168-10.77757-1.80215-14.1221-2.08405-4.68265-.39467-14.28993-.18758-17.80807.38387-8.70887 1.41459-13.028171 3.55254-15.811026 7.82606-2.230704 3.42561-3.30745 7.4555-3.304504 12.36763.0032 5.38208 1.685615 10.33001 4.555689 13.39835 1.872987 2.00238 6.082191 3.96008 9.779001 4.54822 2.10281.33454 8.92935.11855 11.56007-.36577z" transform="scale(0.26458333)"/></svg></span><span class="navbar-logo logo-dark d-none"><svg width="30" height="34" viewBox="0 0 64.386 62.635" xmlns="http://www.w3.org/2000/svg"><path d="m18.112 62.241c-.58208-.2097-1.0825-.38307-1.1121-.38526-.05964-.004-6.9703-8.5523-8.016-9.9151-.3638-.47411-1.8521-2.3244-3.3073-4.1118-6.169-7.5771-5.7671-6.894-5.6043-9.525.07652-1.2369.2681-2.6062.42574-3.0427.15763-.43656.88408-3.4726 1.6143-6.7469s1.4423-6.4294 1.5822-7.0115c.13998-.58209.49521-2.1299.78941-3.4396 1.3414-5.9718 1.3876-6.0514 4.3737-7.5406 1.313-.65484 3.9324-1.927 5.8208-2.8269 1.8885-.89995 6.3475-3.0258 9.9091-4.7242 7.7798-3.7099 7.4615-3.6736 12.178-1.3871 1.6735.81137 4.531 2.1853 6.35 3.0532 1.819.86788 4.4384 2.1189 5.8208 2.78 1.3824.66112 3.7644 1.7868 5.2931 2.5015 2.9983 1.4017 4.0296 2.3189 4.4852 3.9889.24392.89408.61395 2.4653 2.1314 9.0501.28504 1.2369.86914 3.7372 1.298 5.5562s.97374 4.2003 1.2108 5.2917c.2371 1.0914.56563 2.4425.73006 3.0024.50213 1.7098.37232 3.363-.34938 4.4494-.35422.53325-2.549 3.3137-4.8774 6.1788-2.3283 2.8651-4.531 5.6016-4.8948 6.0813-3.5052 4.6213-6.5923 8.1362-7.558 8.6052-1.0278.49922-1.6581.52197-14.155.51087-10.7-.01-13.272-.081-14.138-.39289zm14.42-14.853c1.993-.65861 4.1321-1.8055 5.208-2.7923l.57777-.52995.15829 1.0218c.37804 2.4404.25325 2.3447 3.0582 2.3447h2.5072v-12.965c0-14.742.01357-14.637-2.1954-17.096-2.2207-2.4725-5.3026-3.3183-11.157-3.0616-3.7392.16395-6.9101.77913-9.2875 1.8019l-1.3054.56157v2.2164c0 1.219.0817 2.2164.18156 2.2164s1.0226-.23473 2.0505-.52163c2.4182-.67492 6.8343-1.3304 8.9629-1.3304 2.0099.0 4.3168.63112 5.1681 1.4139 1.22 1.1218 1.459 1.9649 1.5795 5.5722.10844 3.2453.08971 3.4049-.37858 3.2252-.27096-.10398-1.6251-.35976-3.0091-.56841-6.4942-.979-10.999.005-14.067 3.0735-2.0011 2.0011-2.4548 3.2402-2.4641 6.7305-.0065 2.4258.08634 3.1141.55768 4.1334 1.179 2.5499 3.2925 4.2534 5.9416 4.9794 2.3169.63499 5.0434.52227 7.9127-.42589zm-5.3603-4.4174c-1.3419-.50246-1.7811-.90498-2.3487-2.1529-.96238-2.1156-.37837-5.1724 1.2299-6.4375 1.6643-1.3091 6.0181-1.7402 10.183-1.0084l1.7198.30217v6.6092l-1.4496.86623c-3.1522 1.8836-7.1071 2.6552-9.3347 1.8212z" stroke-width=".26458" style="fill:#fff"/><path style="fill:none;stroke-width:.271169" d="m97.026736 181.42372c-11.841729-2.08439-21.332462-9.10215-26.093859-19.29466-1.998022-4.27707-2.054194-4.6839-2.055098-14.88419-841e-6-9.49243.144169-11.16725 1.267846-14.64314 1.712817-5.29828 6.177554-10.936 12.299033-15.53024 2.542552-1.90822 7.390509-4.53026 10.594967-5.73033 8.933335-3.34556 20.674605-4.18152 34.409895-2.44995 4.41785.55695 12.65266 1.97363 14.19738 2.44244 1.76241.53489 1.85502.50959 2.22367-.60744.24279-.73566.28029-2.73516.14369-7.66053-.44788-16.149002-1.23751-19.911778-5.02917-23.965076-1.80821-1.932978-3.56225-2.973051-7.11557-4.219231-5.30124-1.859191-12.26098-2.569875-19.19872-1.960452-10.49153.921594-19.993865 2.573896-30.430988 5.291456l-5.619006 1.463045-.198978-.992725C76.31239 78.136699 76.217381 74.401849 76.210696 70.38303l-.01215-7.306943 3.356503-1.444983c10.517529-4.527823 21.216871-6.656502 37.293351-7.419665 12.51101-.593907 22.76653.582675 29.54824 3.389974 4.64166 1.921419 7.46417 3.920688 11.49419 8.14168 5.92808 6.208991 7.10885 9.292714 7.94906 20.759878.20234 2.761617.35353 19.385439.44083 48.471489l.13286 44.26837-6.87266-.008c-7.35796-.009-10.40797-.26157-11.45694-.94889-1.06894-.70039-1.56607-2.17132-2.37024-7.01314-.41845-2.51943-.81979-4.63975-.89185-4.71182-.0721-.0721-.94053.61073-1.92991 1.51732-2.61666 2.39769-6.17638 4.67392-11.10375 7.10019-7.00303 3.44832-13.15672 5.41292-19.90153 6.35366-4.14851.57862-11.25229.52696-14.85996-.10807zM117.9586 163.14859c7.66738-1.41157 14.24402-3.97835 21.89691-8.5461l3.72858-2.22546v-12.58107c0-11.74762-.0314-12.59038-.47455-12.72168-1.42309-.42168-10.77757-1.80215-14.1221-2.08405-4.68265-.39467-14.28993-.18758-17.80807.38387-8.70887 1.41459-13.028171 3.55254-15.811026 7.82606-2.230704 3.42561-3.30745 7.4555-3.304504 12.36763.0032 5.38208 1.685615 10.33001 4.555689 13.39835 1.872987 2.00238 6.082191 3.96008 9.779001 4.54822 2.10281.33454 8.92935.11855 11.56007-.36577z" transform="scale(0.26458333)"/></svg></span></a><button id=mode class="btn btn-link order-2 order-md-4" type=button aria-label="Toggle mode">
<span class=toggle-dark><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg></span><span class=toggle-light><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></span></button><ul class="navbar-nav social-nav order-3 order-md-5"><li class=nav-item><a class=nav-link href=https://github.com/aws-controllers-k8s/community><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg><span class="ms-2 visually-hidden">GitHub</span></a></li></ul><div class="collapse navbar-collapse order-4 order-md-1"><ul class="navbar-nav flex-grow-1 main-nav me-auto order-5 order-md-2"><li class="nav-item active"><a class=nav-link href=https://aws-controllers-k8s.github.io/community/docs/community/overview/>Documentation</a></li><li class=nav-item><a class=nav-link href=https://aws-controllers-k8s.github.io/community/reference/>API Reference</a></li></ul><div class="break order-6 d-md-none"></div><form class="navbar-form flex-grow-1 order-7 order-md-3"><input id=userinput class="form-control is-search" type=search placeholder="Search docs..." aria-label="Search docs..." autocomplete=off><div id=suggestions class="shadow bg-white rounded"></div></form></div></div></header><div class="wrap container" role=document><div class=content><div class="row flex-xl-nowrap"><div class="col-lg-5 col-xl-4 docs-sidebar"><nav class=docs-links aria-label="Main navigation"><ul class="list-unstyled collapsible-sidebar"><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-introduction aria-expanded=false>
Introduction</button><div class="collapse collapsed" id=section-introduction><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aws-controllers-k8s.github.io/community/docs/community/overview/>Overview</a></li><li><a class="docs-link rounded" href=https://aws-controllers-k8s.github.io/community/docs/community/how-it-works/>How it Works</a></li><li><a class="docs-link rounded" href=https://aws-controllers-k8s.github.io/community/docs/community/services/>Services</a></li><li><a class="docs-link rounded" href=https://aws-controllers-k8s.github.io/community/docs/community/releases/>Release Phases</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-getting-started aria-expanded=false>
Getting Started</button><div class="collapse collapsed" id=section-getting-started><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aws-controllers-k8s.github.io/community/docs/user-docs/install/>Install an ACK Controller</a></li><li><a class="docs-link rounded" href=https://aws-controllers-k8s.github.io/community/docs/user-docs/irsa/>Configure IAM Permissions</a></li><li><a class="docs-link rounded" href=https://aws-controllers-k8s.github.io/community/docs/user-docs/features/>Alpha Features</a></li><li><a class="docs-link rounded" href=https://aws-controllers-k8s.github.io/community/docs/user-docs/resource-crud/>Create an ACK Resource</a></li><li><a class="docs-link rounded" href=https://aws-controllers-k8s.github.io/community/docs/user-docs/multi-region-resource-management/>Manage Resources In Multiple Regions</a></li><li><a class="docs-link rounded" href=https://aws-controllers-k8s.github.io/community/docs/user-docs/cross-account-resource-management/>Manage Resources In Multiple AWS Accounts</a></li><li><a class="docs-link rounded" href=https://aws-controllers-k8s.github.io/community/docs/user-docs/drift-recovery/>Recovering from Drift</a></li><li><a class="docs-link rounded" href=https://aws-controllers-k8s.github.io/community/docs/user-docs/leader-election/>Managing multiple instances of ACK with leader election</a></li><li><a class="docs-link rounded" href=https://aws-controllers-k8s.github.io/community/docs/user-docs/authorization/>Permissions Overview</a></li><li><a class="docs-link rounded" href=https://aws-controllers-k8s.github.io/community/docs/user-docs/authentication/>Authentication and Credentials</a></li><li><a class="docs-link rounded" href=https://aws-controllers-k8s.github.io/community/docs/user-docs/field-export/>Copy a resource field into a ConfigMap or Secret</a></li><li><a class="docs-link rounded" href=https://aws-controllers-k8s.github.io/community/docs/user-docs/adopted-resource/>Adopting Existing AWS Resources</a></li><li><a class="docs-link rounded" href=https://aws-controllers-k8s.github.io/community/docs/user-docs/ack-tags/>Managing Tags on your AWS Resources</a></li><li><a class="docs-link rounded" href=https://aws-controllers-k8s.github.io/community/docs/user-docs/deletion-policy/>Retain AWS Resources after CR Deletion</a></li><li><a class="docs-link rounded" href=https://aws-controllers-k8s.github.io/community/docs/user-docs/openshift/>Red Hat OpenShift</a></li><li><a class="docs-link rounded" href=https://aws-controllers-k8s.github.io/community/docs/user-docs/cleanup/>Uninstall an ACK Controller</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded" data-bs-toggle=collapse data-bs-target=#section-tutorials aria-expanded=true>
Tutorials</button><div class="collapse show" id=section-tutorials><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aws-controllers-k8s.github.io/community/docs/tutorials/sagemaker-example/>Machine Learning with the ACK SageMaker Controller</a></li><li><a class="docs-link rounded" href=https://aws-controllers-k8s.github.io/community/docs/tutorials/autoscaling-example/>Scale SageMaker Workloads with Application Auto Scaling</a></li><li><a class="docs-link rounded active" href=https://aws-controllers-k8s.github.io/community/docs/tutorials/rds-example/>Deploy PostgreSQL, MySQL, MariaDB Instances Using the ACK RDS Controller</a></li><li><a class="docs-link rounded" href=https://aws-controllers-k8s.github.io/community/docs/tutorials/ec2-example/>Manage a VPC Workflow with the ACK EC2-Controller</a></li><li><a class="docs-link rounded" href=https://aws-controllers-k8s.github.io/community/docs/tutorials/apigatewayv2-reference-example/>Manage HTTP APIs with the ACK APIGatewayv2 Controller</a></li><li><a class="docs-link rounded" href=https://aws-controllers-k8s.github.io/community/docs/tutorials/memorydb-example/>Create a managed Amazon MemoryDB for Redis Cluster using the ACK MemoryDB Controller</a></li><li><a class="docs-link rounded" href=https://aws-controllers-k8s.github.io/community/docs/tutorials/aurora-serverless-v2/>Manage an Aurora Serverless v2 cluster with the ACK RDS Controller</a></li><li><a class="docs-link rounded" href=https://aws-controllers-k8s.github.io/community/docs/tutorials/eventbridge-example/>Manage EventBridge event buses and rules with the ACK EventBridge Controller</a></li><li><a class="docs-link rounded" href=https://aws-controllers-k8s.github.io/community/docs/tutorials/pipes-example/>Manage EventBridge Pipes with the ACK Pipes Controller</a></li><li><a class="docs-link rounded" href=https://aws-controllers-k8s.github.io/community/docs/tutorials/sqs-example/>Manage SQS queues with the ACK SQS Controller</a></li><li><a class="docs-link rounded" href=https://aws-controllers-k8s.github.io/community/docs/tutorials/lambda-oci-example/>Create a Lambda OCI Function with the ACK Lambda Controller</a></li><li><a class="docs-link rounded" href=https://aws-controllers-k8s.github.io/community/docs/tutorials/emr-on-eks-example/>Run Spark jobs using the ACK EMR on EKS controller</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-contributor aria-expanded=false>
Contributor Docs</button><div class="collapse collapsed" id=section-contributor><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aws-controllers-k8s.github.io/community/docs/contributor-docs/overview/>Contribution Overview</a></li><li><a class="docs-link rounded" href=https://aws-controllers-k8s.github.io/community/docs/contributor-docs/tenets/>Project Tenets</a></li><li><a class="docs-link rounded" href=https://aws-controllers-k8s.github.io/community/docs/contributor-docs/code-generation/>Code Generation</a></li><li><a class="docs-link rounded" href=https://aws-controllers-k8s.github.io/community/docs/contributor-docs/code-organization/>Code Organization</a></li><li><a class="docs-link rounded" href=https://aws-controllers-k8s.github.io/community/docs/contributor-docs/operatorhub-onboarding/>OperatorHub Onboarding</a></li><li><a class="docs-link rounded" href=https://aws-controllers-k8s.github.io/community/docs/contributor-docs/api-inference/>API Inference</a></li><li><a class="docs-link rounded" href=https://aws-controllers-k8s.github.io/community/docs/contributor-docs/setup/>Setup</a></li><li><a class="docs-link rounded" href=https://aws-controllers-k8s.github.io/community/docs/contributor-docs/building-controller/>Building a Controller</a></li><li><a class="docs-link rounded" href=https://aws-controllers-k8s.github.io/community/docs/contributor-docs/code-generator-config/>Understanding generator.yaml configuration</a></li><li><a class="docs-link rounded" href=https://aws-controllers-k8s.github.io/community/docs/contributor-docs/testing/>Testing</a></li><li><a class="docs-link rounded" href=https://aws-controllers-k8s.github.io/community/docs/contributor-docs/release/>Release</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-discussion aria-expanded=false>
Discussion</button><div class="collapse collapsed" id=section-discussion><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aws-controllers-k8s.github.io/community/docs/community/background/>Background</a></li><li><a class="docs-link rounded" href=https://aws-controllers-k8s.github.io/community/docs/community/faq/>FAQ</a></li><li><a class="docs-link rounded" href=https://aws-controllers-k8s.github.io/community/docs/community/discussions/>Discussions</a></li></ul></div></li></ul></nav></div><nav class="docs-toc d-none d-xl-block col-xl-3" aria-label="Secondary navigation"><div class=page-links><h3>On this page</h3><hr><span class=small><nav id=TableOfContents><ul><li><a href=#setup>Setup</a><ul><li><a href=#prerequisites>Prerequisites</a></li><li><a href=#install-the-ack-service-controller-for-rds>Install the ACK service controller for RDS</a></li><li><a href=#configure-iam-permissions>Configure IAM permissions</a></li></ul></li><li><a href=#deploy-database-instances>Deploy Database Instances</a><ul><li><a href=#postgresql>PostgreSQL</a></li><li><a href=#mysql>MySQL</a></li><li><a href=#mariadb>MariaDB</a></li></ul></li><li><a href=#connect-to-database-instances>Connect to Database Instances</a></li><li><a href=#create-a-database-from-snapshot>Create a Database from Snapshot</a></li><li><a href=#next-steps>Next steps</a><ul><li><a href=#cleanup>Cleanup</a></li></ul></li></ul></nav></span></div></nav><main class="docs-content col-lg-11 col-xl-9"><h1>Deploy PostgreSQL, MySQL, MariaDB Instances Using the ACK RDS Controller</h1><p class=lead>Create and use PostgreSQL or MariaDB instances in Amazon RDS using Amazon Elastic Kubernetes Service (EKS).</p><p>The ACK service controller for Amazon Relational Database Service (RDS) lets you manage RDS database instances directly from Kubernetes. This includes the following database engines:</p><ul><li><a href=https://aws.amazon.com/rds/aurora/>Amazon Aurora</a> (MySQL & PostgreSQL)</li><li><a href=https://aws.amazon.com/rds/postgresql/>Amazon RDS for PostgreSQL</a></li><li><a href=https://aws.amazon.com/rds/mysql/>Amazon RDS for MySQL</a></li><li><a href=https://aws.amazon.com/rds/mariadb/>Amazon RDS for MariaDB</a></li><li><a href=https://aws.amazon.com/rds/oracle/>Amazon RDS for Oracle</a></li><li><a href=https://aws.amazon.com/rds/sqlserver/>Amazon RDS for SQL Server</a></li></ul><p>This guide will show you how to create and connect to several types of database engines available in <a href=https://aws.amazon.com/rds/>Amazon RDS</a> through Kubernetes.</p><h2 id=setup>Setup<a href=#setup class=anchor aria-hidden=true>#</a></h2><p>Although it is not necessary to use Amazon Elastic Kubernetes Service (Amazon EKS) with ACK, this guide assumes that you have access to an Amazon EKS cluster. If this is your first time creating an Amazon EKS cluster, see <a href=https://docs.aws.amazon.com/deep-learning-containers/latest/devguide/deep-learning-containers-eks-setup.html>Amazon EKS Setup</a>. For automated cluster creation using <code>eksctl</code>, see <a href=https://docs.aws.amazon.com/eks/latest/userguide/getting-started-eksctl.html>Getting started with Amazon EKS - <code>eksctl</code></a> and create your cluster with Amazon EC2 Linux managed nodes.</p><h3 id=prerequisites>Prerequisites<a href=#prerequisites class=anchor aria-hidden=true>#</a></h3><p>This guide assumes that you have:</p><ul><li>Created an EKS cluster with Kubernetes version 1.16 or higher.</li><li>AWS IAM permissions to create roles and attach policies to roles.</li><li>Installed the following tools on the client machine used to access your Kubernetes cluster:<ul><li><a href=https://docs.aws.amazon.com/cli/latest/userguide/install-cliv1.html>AWS CLI</a> - A command line tool for interacting with AWS services.</li><li><a href=https://docs.aws.amazon.com/eks/latest/userguide/install-kubectl.html>kubectl</a> - A command line tool for working with Kubernetes clusters.</li><li><a href=https://docs.aws.amazon.com/eks/latest/userguide/eksctl.html>eksctl</a> - A command line tool for working with EKS clusters.</li><li><a href=https://helm.sh/docs/intro/install/>Helm 3.7+</a> - A tool for installing and managing Kubernetes applications.</li></ul></li></ul><h3 id=install-the-ack-service-controller-for-rds>Install the ACK service controller for RDS<a href=#install-the-ack-service-controller-for-rds class=anchor aria-hidden=true>#</a></h3><p>You can deploy the ACK service controller for Amazon RDS using the <a href=https://gallery.ecr.aws/aws-controllers-k8s/rds-chart>rds-chart Helm chart</a>.</p><p>Log into the Helm registry that stores the ACK charts:</p><pre><code class=language-bash>aws ecr-public get-login-password --region us-east-1 | helm registry login --username AWS --password-stdin public.ecr.aws
</code></pre><p>You can now use the Helm chart to deploy the ACK service controller for Amazon RDS to your EKS cluster. At a minimum, you need to specify the AWS Region to execute the RDS API calls.</p><p>For example, to specify that the RDS API calls go to the <code>us-east-1</code> region, you can deploy the service controller with the following command:</p><pre><code class=language-bash>helm install --create-namespace -n ack-system oci://public.ecr.aws/aws-controllers-k8s/rds-chart --version=0.0.27 --generate-name --set=aws.region=us-east-1
</code></pre><p>For a full list of available values to the Helm chart, please <a href=https://github.com/aws-controllers-k8s/rds-controller/blob/main/helm/values.yaml>review the values.yaml file</a>.</p><h3 id=configure-iam-permissions>Configure IAM permissions<a href=#configure-iam-permissions class=anchor aria-hidden=true>#</a></h3><p>Once the service controller is deployed, you will need to <a href=../../user-docs/irsa/>configure the IAM permissions</a> for the controller to query the RDS API. For full details, please review the AWS Controllers for Kubernetes documentation for <a href=../../user-docs/irsa/>how to configure the IAM permissions</a>. If you follow the examples in the documentation, use the value of <code>rds</code> for <code>SERVICE</code>.</p><h2 id=deploy-database-instances>Deploy Database Instances<a href=#deploy-database-instances class=anchor aria-hidden=true>#</a></h2><p>You can deploy most RDS database instances using the <code>DBInstance</code> custom resource. The examples below show how to deploy using different database engines in RDS from your Kubernetes environment. For a full list of options available in the <code>DBInstance</code> custom resource definition, you can use <code>kubectl explain dbinstance</code>.</p><p>The examples below use the <code>db.t4g.micro</code> instance type. Please review the <a href=https://aws.amazon.com/rds/instance-types/>RDS instance types</a> to select the most appropriate one for your workload.</p><h3 id=postgresql>PostgreSQL<a href=#postgresql class=anchor aria-hidden=true>#</a></h3><p>To create a <a href=https://aws.amazon.com/rds/postgresql/>AWS RDS for PostgreSQL</a> instance, you must first set up a master password. You can do this by <a href=https://kubernetes.io/docs/concepts/configuration/secret/#creating-a-secret>creating a Kubernetes Secret</a>, e.g.:</p><pre><code class=language-bash>RDS_INSTANCE_NAME=&quot;&lt;your instance name&gt;&quot;

kubectl create secret generic &quot;${RDS_INSTANCE_NAME}-password&quot; \
  --from-literal=password=&quot;&lt;your password&gt;&quot;
</code></pre><p>Next, create a <code>DBInstance</code> custom resource. The example below shows how to provision a RDS for PostgreSQL 14 instance with the credentials created in the previous step:</p><pre><code class=language-bash>cat &lt;&lt;EOF &gt; rds-postgresql.yaml
apiVersion: rds.services.k8s.aws/v1alpha1
kind: DBInstance
metadata:
  name: &quot;${RDS_INSTANCE_NAME}&quot;
spec:
  allocatedStorage: 20
  dbInstanceClass: db.t4g.micro
  dbInstanceIdentifier: &quot;${RDS_INSTANCE_NAME}&quot;
  engine: postgres
  engineVersion: &quot;14&quot;
  masterUsername: &quot;postgres&quot;
  masterUserPassword:
    namespace: default
    name: &quot;${RDS_INSTANCE_NAME}-password&quot;
    key: password
EOF

kubectl apply -f rds-postgresql.yaml
</code></pre><p>You can track the status of the provisioned database using <code>kubectl describe</code> on the <code>DBInstance</code> custom resource:</p><pre><code class=language-bash>kubectl describe dbinstance &quot;${RDS_INSTANCE_NAME}&quot;
</code></pre><p>When the <code>DB Instance Status</code> says <code>Available</code>, you can connect to the database instance.</p><h3 id=mysql>MySQL<a href=#mysql class=anchor aria-hidden=true>#</a></h3><p>To create a <a href=https://aws.amazon.com/rds/mysql/>AWS RDS for MySQL</a> instance, you must first set up a master password. You can do this by <a href=https://kubernetes.io/docs/concepts/configuration/secret/#creating-a-secret>creating a Kubernetes Secret</a>, e.g.:</p><pre><code class=language-bash>RDS_INSTANCE_NAME=&quot;&lt;your instance name&gt;&quot;

kubectl create secret generic &quot;${RDS_INSTANCE_NAME}-password&quot; \
  --from-literal=password=&quot;&lt;your password&gt;&quot;
</code></pre><p>Next, create a <code>DBInstance</code> custom resource. The example below shows how to provision a RDS for MySQL 8.0 instance with the credentials created in the previous step:</p><pre><code class=language-bash>cat &lt;&lt;EOF &gt; rds-mysql.yaml
apiVersion: rds.services.k8s.aws/v1alpha1
kind: DBInstance
metadata:
  name: &quot;${RDS_INSTANCE_NAME}&quot;
spec:
  allocatedStorage: 20
  dbInstanceClass: db.t4g.micro
  dbInstanceIdentifier: &quot;${RDS_INSTANCE_NAME}&quot;
  engine: mysql
  engineVersion: &quot;8.0&quot;
  masterUsername: &quot;admin&quot;
  masterUserPassword:
    namespace: default
    name: &quot;${RDS_INSTANCE_NAME}-password&quot;
    key: password
EOF

kubectl apply -f rds-mysql.yaml
</code></pre><p>You can track the status of the provisioned database using <code>kubectl describe</code> on the <code>DBInstance</code> custom resource:</p><pre><code class=language-bash>kubectl describe dbinstance &quot;${RDS_INSTANCE_NAME}&quot;
</code></pre><p>When the <code>DB Instance Status</code> says <code>Available</code>, you can connect to the database instance.</p><h3 id=mariadb>MariaDB<a href=#mariadb class=anchor aria-hidden=true>#</a></h3><p>To create a <a href=https://aws.amazon.com/rds/mariadb/>AWS RDS for MariaDB</a> instance, you must first set up a master password. You can do this by <a href=https://kubernetes.io/docs/concepts/configuration/secret/#creating-a-secret>creating a Kubernetes Secret</a>, e.g.:</p><pre><code class=language-bash>RDS_INSTANCE_NAME=&quot;&lt;your instance name&gt;&quot;

kubectl create secret generic &quot;${RDS_INSTANCE_NAME}-password&quot; \
  --from-literal=password=&quot;&lt;your password&gt;&quot;
</code></pre><p>Next, create a <code>DBInstance</code> custom resource. The example below shows how to provision a RDS for MariaDB 10.6 instance with the credentials created in the previous step:</p><pre><code class=language-bash>RDS_INSTANCE_NAME=&quot;&lt;your instance name&gt;&quot;

cat &lt;&lt;EOF &gt; rds-mariadb.yaml
apiVersion: rds.services.k8s.aws/v1alpha1
kind: DBInstance
metadata:
  name: &quot;${RDS_INSTANCE_NAME}&quot;
spec:
  allocatedStorage: 20
  dbInstanceClass: db.t4g.micro
  dbInstanceIdentifier: &quot;${RDS_INSTANCE_NAME}&quot;
  engine: mariadb
  engineVersion: &quot;10.6&quot;
  masterUsername: &quot;admin&quot;
  masterUserPassword:
    namespace: default
    name: &quot;${RDS_INSTANCE_NAME}-password&quot;
    key: password
EOF

kubectl apply -f rds-mariadb.yaml
</code></pre><p>You can track the status of the provisioned database by describing the DBInstance custom resource:</p><pre><code class=language-bash>kubectl describe dbinstance &quot;${RDS_INSTANCE_NAME}&quot;
</code></pre><p>When the <code>DB Instance Status</code> says <code>Available</code>, you can connect to the database instance.</p><h2 id=connect-to-database-instances>Connect to Database Instances<a href=#connect-to-database-instances class=anchor aria-hidden=true>#</a></h2><p>The <code>DBInstance</code> status contains the information for connecting to a RDS database instance. The host information can be found in <code>status.endpoint.address</code> and the port information can be found in <code>status.endpoint.port</code>. The master user name can be found in <code>spec.masterUsername</code>.</p><p>The database password is in the Secret that is referenced in the <code>DBInstance</code> spec (<code>spec.masterPassword.name</code>).</p><p>You can extract this information and make it available to your Pods using a <a href=../../user-docs/field-export><code>FieldExport</code></a> resource. For example, to get the connection information from either RDS database instance created the above example, you can use the following example:</p><pre><code class=language-bash>RDS_INSTANCE_CONN_CM=&quot;${RDS_INSTANCE_NAME}-conn-cm&quot;

cat &lt;&lt;EOF &gt; rds-field-exports.yaml
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: ${RDS_INSTANCE_CONN_CM}
data: {}
---
apiVersion: services.k8s.aws/v1alpha1
kind: FieldExport
metadata:
  name: ${RDS_INSTANCE_NAME}-host
spec:
  to:
    name: ${RDS_INSTANCE_CONN_CM}
    kind: configmap
  from:
    path: &quot;.status.endpoint.address&quot;
    resource:
      group: rds.services.k8s.aws
      kind: DBInstance
      name: ${RDS_INSTANCE_NAME}
---
apiVersion: services.k8s.aws/v1alpha1
kind: FieldExport
metadata:
  name: ${RDS_INSTANCE_NAME}-port
spec:
  to:
    name: ${RDS_INSTANCE_CONN_CM}
    kind: configmap
  from:
    path: &quot;.status.endpoint.port&quot;
    resource:
      group: rds.services.k8s.aws
      kind: DBInstance
      name: ${RDS_INSTANCE_NAME}
---
apiVersion: services.k8s.aws/v1alpha1
kind: FieldExport
metadata:
  name: ${RDS_INSTANCE_NAME}-user
spec:
  to:
    name: ${RDS_INSTANCE_CONN_CM}
    kind: configmap
  from:
    path: &quot;.spec.masterUsername&quot;
    resource:
      group: rds.services.k8s.aws
      kind: DBInstance
      name: ${RDS_INSTANCE_NAME}
EOF

kubectl apply -f rds-field-exports.yaml
</code></pre><p>You can inject these values into a container either as environmental variables or files. For example, here is a snippet of a Pod definition that will add the RDS instance connection info into the Pod:</p><pre><code class=language-bash>cat &lt;&lt;EOF &gt; rds-pods.yaml
apiVersion: v1
kind: Pod
metadata:
  name: app
  namespace: ${APP_NAMESPACE}
spec:
  containers:
   - image: busybox
     name: myapp
     command:
        - sleep
        - &quot;3600&quot;
     imagePullPolicy: IfNotPresent
     env:
      - name: PGHOST
        valueFrom:
         configMapKeyRef:
          name: ${RDS_INSTANCE_CONN_CM}
          key: &quot;${APP_NAMESPACE}.${RDS_INSTANCE_NAME}-host&quot;
      - name: PGPORT
        valueFrom:
         configMapKeyRef:
          name: ${RDS_INSTANCE_CONN_CM}
          key: &quot;${APP_NAMESPACE}.${RDS_INSTANCE_NAME}-port&quot;
      - name: PGUSER
        valueFrom:
         configMapKeyRef:
          name: ${RDS_INSTANCE_CONN_CM}
          key: &quot;${APP_NAMESPACE}.${RDS_INSTANCE_NAME}-user&quot;
      - name: PGPASSWORD
        valueFrom:
          secretKeyRef:
           name: &quot;${RDS_INSTANCE_NAME}-password&quot;
           key: password
EOF

kubectl apply -f rds-pods.yaml
</code></pre><h2 id=create-a-database-from-snapshot>Create a Database from Snapshot<a href=#create-a-database-from-snapshot class=anchor aria-hidden=true>#</a></h2><p>You can also restore a database snapshot to a specific <code>DBInstance</code> or <code>DBCluster</code> using the ACK for RDS controller.</p><p>To restore a database snapshot to a <code>DBInstance</code>, you must set the <code>DBSnapshotIdentifier</code> parameter. <code>DBSnapshotIdentifier</code> should match the identifier of an existing DBSnapshot.</p><p>To restore a database snapshot to a <code>DBCluster</code>, you must set the <code>SnapshotIdentifier</code>. The value of <code>SnapshotIdentifier</code> should match either an existing <code>DBCluster</code> snapshot identifier or an ARN of a <code>DBInstance</code>snapshot.</p><p>Once it&rsquo;s set and the resource is created, updating <code>SnapshotIdentifer</code> or <code>DBSnapshotIdentifier</code> fields will have no effect.</p><p>The following examples show how you can restore database snapshots both to <code>DBCluster</code> and <code>DBInstance</code> resources:</p><pre><code class=language-bash>RDS_CLUSTER_NAME=&quot;&lt;your cluster name&gt;&quot;
RDS_REGION=&quot;&lt;your aws region&gt;&quot;
RDS_CUSTOMER_ACCOUNT=&quot;&lt;your aws account id&gt;&quot;
RDS_DB_SNAPSHOT_IDENTIFIER=&quot;&lt;your db snapshot identifier&gt;&quot;

cat &lt;&lt;EOF &gt; rds-restore-dbcluster-snapshot.yaml
apiVersion: rds.services.k8s.aws/v1alpha1
kind: DBCluster
metadata:
  name: &quot;${RDS_CLUSTER_NAME}&quot;
spec:
  dbClusterIdentifier: &quot;${RDS_CLUSTER_NAME}&quot;
  engine: aurora-postgresql
  engineVersion: &quot;14&quot;
  snapshotIdentifier: arn:aws:rds:${RDS_REGION}:${RDS_CUSTOMER_ACCOUNT}:snapshot:${RDS_DB_SNAPSHOT_IDENTIFIER}
EOF

kubectl apply -f rds-restore-dbcluster-snapshot.yaml
</code></pre><pre><code class=language-bash>RDS_INSTANCE_NAME=&quot;&lt;your instance name&gt;&quot;
RDS_DB_SNAPSHOT_IDENTIFIER=&quot;&lt;your db snapshot identifier&gt;&quot;

cat &lt;&lt;EOF &gt; rds-restore-dbinstance-snapshot.yaml
apiVersion: rds.services.k8s.aws/v1alpha1
kind: DBInstance
metadata:
  name: &quot;${RDS_INSTANCE_NAME}&quot;
spec:
  allocatedStorage: 20
  dbInstanceClass: db.m5.large
  dbInstanceIdentifier: &quot;${RDS_INSTANCE_NAME}&quot;
  engine: postgres
  engineVersion: &quot;14&quot;
  masterUsername: &quot;postgres&quot;
  multiAZ: true
  dbSnapshotIdentifier: &quot;${RDS_DB_SNAPSHOT_IDENTIFIER}&quot;
EOF

kubectl apply -f rds-restore-dbinstance-snapshot.yaml
</code></pre><h2 id=next-steps>Next steps<a href=#next-steps class=anchor aria-hidden=true>#</a></h2><p>You can learn more about each of the ACK service controller for RDS custom resources by using <code>kubectl explain</code> on the API resources. These include:</p><ul><li><code>dbinstance</code></li><li><code>dbparametergroup</code></li><li><code>dbcluster</code></li><li><code>dbclusterparametergroup</code></li><li><code>dbsecuritygroup</code></li><li><code>dbsubnetgroup</code></li><li><code>globalclusters</code></li><li><code>dbproxy</code></li></ul><p>The ACK service controller for Amazon RDS is based on the <a href=https://docs.aws.amazon.com/AmazonRDS/latest/APIReference/>Amazon RDS API</a>. To get a full understanding of how all of the APIs work, please review the <a href=https://docs.aws.amazon.com/AmazonRDS/latest/APIReference/>Amazon RDS API documentation</a>.</p><p>You can learn more about <a href=https://docs.aws.amazon.com/rds/index.html>how to use Amazon RDS</a> through the <a href=https://docs.aws.amazon.com/rds/index.html>documentation</a>.</p><h3 id=cleanup>Cleanup<a href=#cleanup class=anchor aria-hidden=true>#</a></h3><p>You can deprovision your RDS instances using <code>kubectl delete</code> command.</p><pre><code class=language-bash>kubectl delete dbinstance &quot;${RDS_INSTANCE_NAME}&quot;
</code></pre><p>To remove the RDS ACK service controller, related CRDs, and namespaces, see <a href=../../user-docs/cleanup/>ACK Cleanup</a>.</p><p>To delete your EKS clusters, see <a href=https://docs.aws.amazon.com/eks/latest/userguide/delete-cluster.html>Amazon EKS - Deleting a cluster</a>.</p><p class=edit-page><a href=https://github.com/aws-controllers-k8s/community/blob/main/docs/content/docs/tutorials/rds-example.md><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-edit-2"><path d="M17 3a2.828 2.828.0 114 4L7.5 20.5 2 22l1.5-5.5L17 3z"/></svg>Edit this page on GitHub</a></p><div class=my-n3></div></main></div></div></div><footer class="footer mt-auto text-muted"><div class=container><div class=row><div class="col-lg-8 order-last order-lg-first"><ul class=list-inline><li class=list-inline-item>Powered by <a href=https://gohugo.io/>Hugo</a> and <a href=https://getdoks.org/>Doks</a></li></ul></div><div class="col-lg-8 order-first order-lg-last text-lg-end"><ul class=list-inline></ul></div></div></div></footer><script src=https://aws-controllers-k8s.github.io/community/js/bootstrap.min.b215b4cd9b395d6674fe820a7dfe831d833cf64feef865325eb6e3256a4cf84110a040b38af60cdecabe307668c218a83a96ff6f1aa1dade51fc78195449e610.js integrity="sha512-shW0zZs5XWZ0/oIKff6DHYM89k/u+GUyXrbjJWpM+EEQoECzivYM3sq+MHZowhioOpb/bxqh2t5R/HgZVEnmEA==" crossorigin=anonymous defer></script>
<script src=https://aws-controllers-k8s.github.io/community/js/highlight.min.845ac7a35070c98e709cb2c243868ea6535713a4e36512571d6995b58dc2e9710dc129f61e35d985044dea835379d832388bc7449de083d2d1e208bf015920fc.js integrity="sha512-hFrHo1BwyY5wnLLCQ4aOplNXE6TjZRJXHWmVtY3C6XENwSn2HjXZhQRN6oNTedgyOIvHRJ3gg9LR4gi/AVkg/A==" crossorigin=anonymous defer></script>
<script src=https://aws-controllers-k8s.github.io/community/main.min.f2b231c301bb6bb703581a2ab160f506b26c9b58a8321a04bff902e06cf229ac0c6d21eeb75cab5a14e5d6f4dd54753134874d6cab025313d1c9b6e8dbe649b5.js integrity="sha512-8rIxwwG7a7cDWBoqsWD1BrJsm1ioMhoEv/kC4GzyKawMbSHut1yrWhTl1vTdVHUxNIdNbKsCUxPRybbo2+ZJtQ==" crossorigin=anonymous defer></script>
<script src=https://aws-controllers-k8s.github.io/community/index.min.f54360ff04fe32a25000a6c432d1619d2cb318aead57eb3201c256eed268378ef6c79c090bb34fbf4fa3967ed7e21d6d44bc819e67a4d220b358807f5c26a585.js integrity="sha512-9UNg/wT+MqJQAKbEMtFhnSyzGK6tV+syAcJW7tJoN472x5wJC7NPv0+jln7X4h1tRLyBnmek0iCzWIB/XCalhQ==" crossorigin=anonymous defer></script></body></html>
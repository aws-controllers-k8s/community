<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300..800&display=swap" rel=stylesheet><link rel=stylesheet href=https://aws-controllers-k8s.github.io/community/main.b44ab0a16d661351069bc46c1306ba0da268843c475849d601d8327c0ce78acc0ed46972b12f0e7de46da0807488c63b3f02ac3a67d1e1a0a629c15ced3307c0.css integrity="sha512-tEqwoW1mE1EGm8RsEwa6DaJohDxHWEnWAdgyfAzniswO1GlysS8OfeRtoIB0iMY7PwKsOmfR4aCmKcFc7TMHwA==" crossorigin=anonymous><noscript><style>img.lazyload{display:none}</style></noscript><meta name=robots content="index, follow"><meta name=googlebot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><meta name=bingbot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><title>API Inference - ACK</title><meta name=description content="How ACK introspects an AWS API model file"><link rel=canonical href=https://aws-controllers-k8s.github.io/community/docs/contributor-docs/api-inference/><meta property="og:locale" content="en_US"><meta property="og:type" content="article"><meta property="og:title" content="API Inference"><meta property="og:description" content="How ACK introspects an AWS API model file"><meta property="og:url" content="https://aws-controllers-k8s.github.io/community/docs/contributor-docs/api-inference/"><meta property="og:site_name" content="ACK"><meta property="og:image" content="https://aws-controllers-k8s.github.io/community/og.png"><meta property="og:image:alt" content="ACK"><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content="@awscloud"><meta name=twitter:creator content><meta name=twitter:title content="API Inference"><meta name=twitter:description content="How ACK introspects an AWS API model file"><meta name=twitter:image content="https://aws-controllers-k8s.github.io/community/og.png"><meta name=twitter:image:alt content="API Inference"><script type=application/ld+json>{"@context":"https://schema.org","@graph":[{"@type":"Organization","@id":"https://aws-controllers-k8s.github.io/#/schema/organization/1","name":"AWS Controllers for K8s","url":"https://aws-controllers-k8s.github.io/","sameAs":["https://twitter.com/awscloud","https://github.com/aws-controllers-k8s/community"],"logo":{"@type":"ImageObject","@id":"https://aws-controllers-k8s.github.io/#/schema/image/1","url":"https://aws-controllers-k8s.github.io/ack.png","width":512,"height":512,"caption":"AWS Controllers for K8s"},"image":{"@id":"https://aws-controllers-k8s.github.io/#/schema/image/1"}},{"@type":"WebSite","@id":"https://aws-controllers-k8s.github.io/#/schema/website/1","url":"https://aws-controllers-k8s.github.io/","name":"ACK","description":"Doks is a Hugo theme helping you build modern documentation websites that are secure, fast, and SEO-ready â€” by default.","publisher":{"@id":"https://aws-controllers-k8s.github.io/#/schema/organization/1"}},{"@type":"WebPage","@id":"https://aws-controllers-k8s.github.io/community/docs/contributor-docs/api-inference/","url":"https://aws-controllers-k8s.github.io/community/docs/contributor-docs/api-inference/","name":"API Inference","description":"How ACK introspects an AWS API model file","isPartOf":{"@id":"https://aws-controllers-k8s.github.io/#/schema/website/1"},"about":{"@id":"https://aws-controllers-k8s.github.io/#/schema/organization/1"},"datePublished":"0001-01-01T00:00:00CET","dateModified":"0001-01-01T00:00:00CET","breadcrumb":{"@id":"https://aws-controllers-k8s.github.io/community/docs/contributor-docs/api-inference/#/schema/breadcrumb/1"},"primaryImageOfPage":{"@id":"https://aws-controllers-k8s.github.io/community/docs/contributor-docs/api-inference/#/schema/image/2"},"inLanguage":"en-US","potentialAction":[{"@type":"ReadAction","target":["https://aws-controllers-k8s.github.io/community/docs/contributor-docs/api-inference/"]}]},{"@type":"BreadcrumbList","@id":"https://aws-controllers-k8s.github.io/community/docs/contributor-docs/api-inference/#/schema/breadcrumb/1","name":"Breadcrumbs","itemListElement":[{"@type":"ListItem","position":1,"item":{"@type":"WebPage","@id":"https://aws-controllers-k8s.github.io/community/","url":"https://aws-controllers-k8s.github.io/community/","name":"Home"}},{"@type":"ListItem","position":2,"item":{"@type":"WebPage","@id":"https://aws-controllers-k8s.github.io/community/docs/","url":"https://aws-controllers-k8s.github.io/community/docs/","name":"Docs"}},{"@type":"ListItem","position":3,"item":{"@type":"WebPage","@id":"https://aws-controllers-k8s.github.io/community/docs/contributor-docs/","url":"https://aws-controllers-k8s.github.io/community/docs/contributor-docs/","name":"Contributor Docs"}},{"@type":"ListItem","position":4,"item":{"@id":"https://aws-controllers-k8s.github.io/community/docs/contributor-docs/api-inference/"}}]},{"@context":"https://schema.org","@graph":[{"@type":"Article","@id":"https://aws-controllers-k8s.github.io/#/schema/article/1","headline":"API Inference","description":"How ACK introspects an AWS API model file","isPartOf":{"@id":"https://aws-controllers-k8s.github.io/community/docs/contributor-docs/api-inference/"},"mainEntityOfPage":{"@id":"https://aws-controllers-k8s.github.io/community/docs/contributor-docs/api-inference/"},"datePublished":"0001-01-01T00:00:00CET","dateModified":"0001-01-01T00:00:00CET","author":{"@id":"https://aws-controllers-k8s.github.io/#/schema/person/2"},"publisher":{"@id":"https://aws-controllers-k8s.github.io/#/schema/organization/1"},"image":{"@id":"https://aws-controllers-k8s.github.io/community/docs/contributor-docs/api-inference/#/schema/image/2"}}]},{"@context":"https://schema.org","@graph":[{"@type":"Person","@id":"https://aws-controllers-k8s.github.io/#/schema/person/2","name":"AWS","sameAs":["https://twitter.com/awscloud","https://github.com/aws-controllers-k8s"]}]},{"@context":"https://schema.org","@graph":[{"@type":"ImageObject","@id":"https://aws-controllers-k8s.github.io/community/docs/contributor-docs/api-inference/#/schema/image/2","url":"https://aws-controllers-k8s.github.io/community/og.png","contentUrl":"https://aws-controllers-k8s.github.io/community/og.png","caption":"API Inference"}]}]}</script><meta name=theme-color content="#ff9900"><link rel=apple-touch-icon sizes=180x180 href=https://aws-controllers-k8s.github.io/community/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://aws-controllers-k8s.github.io/community/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://aws-controllers-k8s.github.io/community/favicon-16x16.png><link rel=manifest crossorigin=use-credentials href=https://aws-controllers-k8s.github.io/community/site.webmanifest><link rel=mask-icon color=#5bbad5 href=https://aws-controllers-k8s.github.io/community/safari-pinned-tab.svg><meta name=msapplication-TileColor content="#da532c"><script src=https://aws-controllers-k8s.github.io/community/js/darkmode.min.540761a62e234bbe8337965a4070504533d631a5ee53c1f963a5f9d93a2e7659c72cffd9b5abee16b32bd41be8dad0230cd73090f5492793786b7f15b117e3f6.js integrity="sha512-VAdhpi4jS76DN5ZaQHBQRTPWMaXuU8H5Y6X52ToudlnHLP/ZtavuFrMr1Bvo2tAjDNcwkPVJJ5N4a38VsRfj9g==" crossorigin=anonymous></script></head><body class="docs single d-flex flex-column h-100 dark"><div class="header-bar fixed-top"></div><header class="navbar fixed-top navbar-expand-md navbar-light"><div class=container><input class="menu-btn order-0" type=checkbox id=menu-btn>
<label class="menu-icon d-md-none" for=menu-btn><span class=navicon></span></label>
<a class="navbar-brand order-1 order-md-0 me-auto" href=https://aws-controllers-k8s.github.io/community/><span class="navbar-logo logo-light"><svg width="30" height="34" viewBox="0 0 64.386 62.635" xmlns="http://www.w3.org/2000/svg"><path d="m18.112 62.241c-.58208-.2097-1.0825-.38307-1.1121-.38526-.05964-.004-6.9703-8.5523-8.016-9.9151-.3638-.47411-1.8521-2.3244-3.3073-4.1118-6.169-7.5771-5.7671-6.894-5.6043-9.525.07652-1.2369.2681-2.6062.42574-3.0427.15763-.43656.88408-3.4726 1.6143-6.7469s1.4423-6.4294 1.5822-7.0115c.13998-.58209.49521-2.1299.78941-3.4396 1.3414-5.9718 1.3876-6.0514 4.3737-7.5406 1.313-.65484 3.9324-1.927 5.8208-2.8269 1.8885-.89995 6.3475-3.0258 9.9091-4.7242 7.7798-3.7099 7.4615-3.6736 12.178-1.3871 1.6735.81137 4.531 2.1853 6.35 3.0532 1.819.86788 4.4384 2.1189 5.8208 2.78 1.3824.66112 3.7644 1.7868 5.2931 2.5015 2.9983 1.4017 4.0296 2.3189 4.4852 3.9889.24392.89408.61395 2.4653 2.1314 9.0501.28504 1.2369.86914 3.7372 1.298 5.5562s.97374 4.2003 1.2108 5.2917c.2371 1.0914.56563 2.4425.73006 3.0024.50213 1.7098.37232 3.363-.34938 4.4494-.35422.53325-2.549 3.3137-4.8774 6.1788-2.3283 2.8651-4.531 5.6016-4.8948 6.0813-3.5052 4.6213-6.5923 8.1362-7.558 8.6052-1.0278.49922-1.6581.52197-14.155.51087-10.7-.01-13.272-.081-14.138-.39289zm14.42-14.853c1.993-.65861 4.1321-1.8055 5.208-2.7923l.57777-.52995.15829 1.0218c.37804 2.4404.25325 2.3447 3.0582 2.3447h2.5072v-12.965c0-14.742.01357-14.637-2.1954-17.096-2.2207-2.4725-5.3026-3.3183-11.157-3.0616-3.7392.16395-6.9101.77913-9.2875 1.8019l-1.3054.56157v2.2164c0 1.219.0817 2.2164.18156 2.2164s1.0226-.23473 2.0505-.52163c2.4182-.67492 6.8343-1.3304 8.9629-1.3304 2.0099.0 4.3168.63112 5.1681 1.4139 1.22 1.1218 1.459 1.9649 1.5795 5.5722.10844 3.2453.08971 3.4049-.37858 3.2252-.27096-.10398-1.6251-.35976-3.0091-.56841-6.4942-.979-10.999.005-14.067 3.0735-2.0011 2.0011-2.4548 3.2402-2.4641 6.7305-.0065 2.4258.08634 3.1141.55768 4.1334 1.179 2.5499 3.2925 4.2534 5.9416 4.9794 2.3169.63499 5.0434.52227 7.9127-.42589zm-5.3603-4.4174c-1.3419-.50246-1.7811-.90498-2.3487-2.1529-.96238-2.1156-.37837-5.1724 1.2299-6.4375 1.6643-1.3091 6.0181-1.7402 10.183-1.0084l1.7198.30217v6.6092l-1.4496.86623c-3.1522 1.8836-7.1071 2.6552-9.3347 1.8212z" stroke-width=".26458" style="fill:#212529"/><path style="fill:none;stroke-width:.271169" d="m97.026736 181.42372c-11.841729-2.08439-21.332462-9.10215-26.093859-19.29466-1.998022-4.27707-2.054194-4.6839-2.055098-14.88419-841e-6-9.49243.144169-11.16725 1.267846-14.64314 1.712817-5.29828 6.177554-10.936 12.299033-15.53024 2.542552-1.90822 7.390509-4.53026 10.594967-5.73033 8.933335-3.34556 20.674605-4.18152 34.409895-2.44995 4.41785.55695 12.65266 1.97363 14.19738 2.44244 1.76241.53489 1.85502.50959 2.22367-.60744.24279-.73566.28029-2.73516.14369-7.66053-.44788-16.149002-1.23751-19.911778-5.02917-23.965076-1.80821-1.932978-3.56225-2.973051-7.11557-4.219231-5.30124-1.859191-12.26098-2.569875-19.19872-1.960452-10.49153.921594-19.993865 2.573896-30.430988 5.291456l-5.619006 1.463045-.198978-.992725C76.31239 78.136699 76.217381 74.401849 76.210696 70.38303l-.01215-7.306943 3.356503-1.444983c10.517529-4.527823 21.216871-6.656502 37.293351-7.419665 12.51101-.593907 22.76653.582675 29.54824 3.389974 4.64166 1.921419 7.46417 3.920688 11.49419 8.14168 5.92808 6.208991 7.10885 9.292714 7.94906 20.759878.20234 2.761617.35353 19.385439.44083 48.471489l.13286 44.26837-6.87266-.008c-7.35796-.009-10.40797-.26157-11.45694-.94889-1.06894-.70039-1.56607-2.17132-2.37024-7.01314-.41845-2.51943-.81979-4.63975-.89185-4.71182-.0721-.0721-.94053.61073-1.92991 1.51732-2.61666 2.39769-6.17638 4.67392-11.10375 7.10019-7.00303 3.44832-13.15672 5.41292-19.90153 6.35366-4.14851.57862-11.25229.52696-14.85996-.10807zM117.9586 163.14859c7.66738-1.41157 14.24402-3.97835 21.89691-8.5461l3.72858-2.22546v-12.58107c0-11.74762-.0314-12.59038-.47455-12.72168-1.42309-.42168-10.77757-1.80215-14.1221-2.08405-4.68265-.39467-14.28993-.18758-17.80807.38387-8.70887 1.41459-13.028171 3.55254-15.811026 7.82606-2.230704 3.42561-3.30745 7.4555-3.304504 12.36763.0032 5.38208 1.685615 10.33001 4.555689 13.39835 1.872987 2.00238 6.082191 3.96008 9.779001 4.54822 2.10281.33454 8.92935.11855 11.56007-.36577z" transform="scale(0.26458333)"/></svg></span><span class="navbar-logo logo-dark d-none"><svg width="30" height="34" viewBox="0 0 64.386 62.635" xmlns="http://www.w3.org/2000/svg"><path d="m18.112 62.241c-.58208-.2097-1.0825-.38307-1.1121-.38526-.05964-.004-6.9703-8.5523-8.016-9.9151-.3638-.47411-1.8521-2.3244-3.3073-4.1118-6.169-7.5771-5.7671-6.894-5.6043-9.525.07652-1.2369.2681-2.6062.42574-3.0427.15763-.43656.88408-3.4726 1.6143-6.7469s1.4423-6.4294 1.5822-7.0115c.13998-.58209.49521-2.1299.78941-3.4396 1.3414-5.9718 1.3876-6.0514 4.3737-7.5406 1.313-.65484 3.9324-1.927 5.8208-2.8269 1.8885-.89995 6.3475-3.0258 9.9091-4.7242 7.7798-3.7099 7.4615-3.6736 12.178-1.3871 1.6735.81137 4.531 2.1853 6.35 3.0532 1.819.86788 4.4384 2.1189 5.8208 2.78 1.3824.66112 3.7644 1.7868 5.2931 2.5015 2.9983 1.4017 4.0296 2.3189 4.4852 3.9889.24392.89408.61395 2.4653 2.1314 9.0501.28504 1.2369.86914 3.7372 1.298 5.5562s.97374 4.2003 1.2108 5.2917c.2371 1.0914.56563 2.4425.73006 3.0024.50213 1.7098.37232 3.363-.34938 4.4494-.35422.53325-2.549 3.3137-4.8774 6.1788-2.3283 2.8651-4.531 5.6016-4.8948 6.0813-3.5052 4.6213-6.5923 8.1362-7.558 8.6052-1.0278.49922-1.6581.52197-14.155.51087-10.7-.01-13.272-.081-14.138-.39289zm14.42-14.853c1.993-.65861 4.1321-1.8055 5.208-2.7923l.57777-.52995.15829 1.0218c.37804 2.4404.25325 2.3447 3.0582 2.3447h2.5072v-12.965c0-14.742.01357-14.637-2.1954-17.096-2.2207-2.4725-5.3026-3.3183-11.157-3.0616-3.7392.16395-6.9101.77913-9.2875 1.8019l-1.3054.56157v2.2164c0 1.219.0817 2.2164.18156 2.2164s1.0226-.23473 2.0505-.52163c2.4182-.67492 6.8343-1.3304 8.9629-1.3304 2.0099.0 4.3168.63112 5.1681 1.4139 1.22 1.1218 1.459 1.9649 1.5795 5.5722.10844 3.2453.08971 3.4049-.37858 3.2252-.27096-.10398-1.6251-.35976-3.0091-.56841-6.4942-.979-10.999.005-14.067 3.0735-2.0011 2.0011-2.4548 3.2402-2.4641 6.7305-.0065 2.4258.08634 3.1141.55768 4.1334 1.179 2.5499 3.2925 4.2534 5.9416 4.9794 2.3169.63499 5.0434.52227 7.9127-.42589zm-5.3603-4.4174c-1.3419-.50246-1.7811-.90498-2.3487-2.1529-.96238-2.1156-.37837-5.1724 1.2299-6.4375 1.6643-1.3091 6.0181-1.7402 10.183-1.0084l1.7198.30217v6.6092l-1.4496.86623c-3.1522 1.8836-7.1071 2.6552-9.3347 1.8212z" stroke-width=".26458" style="fill:#fff"/><path style="fill:none;stroke-width:.271169" d="m97.026736 181.42372c-11.841729-2.08439-21.332462-9.10215-26.093859-19.29466-1.998022-4.27707-2.054194-4.6839-2.055098-14.88419-841e-6-9.49243.144169-11.16725 1.267846-14.64314 1.712817-5.29828 6.177554-10.936 12.299033-15.53024 2.542552-1.90822 7.390509-4.53026 10.594967-5.73033 8.933335-3.34556 20.674605-4.18152 34.409895-2.44995 4.41785.55695 12.65266 1.97363 14.19738 2.44244 1.76241.53489 1.85502.50959 2.22367-.60744.24279-.73566.28029-2.73516.14369-7.66053-.44788-16.149002-1.23751-19.911778-5.02917-23.965076-1.80821-1.932978-3.56225-2.973051-7.11557-4.219231-5.30124-1.859191-12.26098-2.569875-19.19872-1.960452-10.49153.921594-19.993865 2.573896-30.430988 5.291456l-5.619006 1.463045-.198978-.992725C76.31239 78.136699 76.217381 74.401849 76.210696 70.38303l-.01215-7.306943 3.356503-1.444983c10.517529-4.527823 21.216871-6.656502 37.293351-7.419665 12.51101-.593907 22.76653.582675 29.54824 3.389974 4.64166 1.921419 7.46417 3.920688 11.49419 8.14168 5.92808 6.208991 7.10885 9.292714 7.94906 20.759878.20234 2.761617.35353 19.385439.44083 48.471489l.13286 44.26837-6.87266-.008c-7.35796-.009-10.40797-.26157-11.45694-.94889-1.06894-.70039-1.56607-2.17132-2.37024-7.01314-.41845-2.51943-.81979-4.63975-.89185-4.71182-.0721-.0721-.94053.61073-1.92991 1.51732-2.61666 2.39769-6.17638 4.67392-11.10375 7.10019-7.00303 3.44832-13.15672 5.41292-19.90153 6.35366-4.14851.57862-11.25229.52696-14.85996-.10807zM117.9586 163.14859c7.66738-1.41157 14.24402-3.97835 21.89691-8.5461l3.72858-2.22546v-12.58107c0-11.74762-.0314-12.59038-.47455-12.72168-1.42309-.42168-10.77757-1.80215-14.1221-2.08405-4.68265-.39467-14.28993-.18758-17.80807.38387-8.70887 1.41459-13.028171 3.55254-15.811026 7.82606-2.230704 3.42561-3.30745 7.4555-3.304504 12.36763.0032 5.38208 1.685615 10.33001 4.555689 13.39835 1.872987 2.00238 6.082191 3.96008 9.779001 4.54822 2.10281.33454 8.92935.11855 11.56007-.36577z" transform="scale(0.26458333)"/></svg></span></a><button id=mode class="btn btn-link order-2 order-md-4" type=button aria-label="Toggle mode">
<span class=toggle-dark><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg></span><span class=toggle-light><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></span></button><ul class="navbar-nav social-nav order-3 order-md-5"><li class=nav-item><a class=nav-link href=https://github.com/aws-controllers-k8s/community><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg><span class="ms-2 visually-hidden">GitHub</span></a></li></ul><div class="collapse navbar-collapse order-4 order-md-1"><ul class="navbar-nav flex-grow-1 main-nav me-auto order-5 order-md-2"><li class="nav-item active"><a class=nav-link href=https://aws-controllers-k8s.github.io/community/docs/community/overview/>Documentation</a></li><li class=nav-item><a class=nav-link href=https://aws-controllers-k8s.github.io/community/reference/>API Reference</a></li></ul><div class="break order-6 d-md-none"></div><form class="navbar-form flex-grow-1 order-7 order-md-3"><input id=userinput class="form-control is-search" type=search placeholder="Search docs..." aria-label="Search docs..." autocomplete=off><div id=suggestions class="shadow bg-white rounded"></div></form></div></div></header><div class="wrap container" role=document><div class=content><div class="row flex-xl-nowrap"><div class="col-lg-5 col-xl-4 docs-sidebar"><nav class=docs-links aria-label="Main navigation"><ul class="list-unstyled collapsible-sidebar"><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-introduction aria-expanded=true>
Introduction</button><div class="collapse show" id=section-introduction><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aws-controllers-k8s.github.io/community/docs/community/overview/>Overview</a></li><li><a class="docs-link rounded" href=https://aws-controllers-k8s.github.io/community/docs/community/how-it-works/>How it Works</a></li><li><a class="docs-link rounded" href=https://aws-controllers-k8s.github.io/community/docs/community/services/>Services</a></li><li><a class="docs-link rounded" href=https://aws-controllers-k8s.github.io/community/docs/community/releases/>Release Phases</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-getting-started aria-expanded=true>
Getting Started</button><div class="collapse show" id=section-getting-started><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aws-controllers-k8s.github.io/community/docs/user-docs/install/>Install an ACK Controller</a></li><li><a class="docs-link rounded" href=https://aws-controllers-k8s.github.io/community/docs/user-docs/irsa/>Configure IAM Permissions</a></li><li><a class="docs-link rounded" href=https://aws-controllers-k8s.github.io/community/docs/user-docs/resource-crud/>Create an ACK Resource</a></li><li><a class="docs-link rounded" href=https://aws-controllers-k8s.github.io/community/docs/user-docs/multi-region-resource-management/>Manage Resources In Multiple Regions</a></li><li><a class="docs-link rounded" href=https://aws-controllers-k8s.github.io/community/docs/user-docs/cross-account-resource-management/>Manage Resources In Multiple AWS Accounts</a></li><li><a class="docs-link rounded" href=https://aws-controllers-k8s.github.io/community/docs/user-docs/authorization/>Permissions Overview</a></li><li><a class="docs-link rounded" href=https://aws-controllers-k8s.github.io/community/docs/user-docs/authentication/>Authentication and Credentials</a></li><li><a class="docs-link rounded" href=https://aws-controllers-k8s.github.io/community/docs/user-docs/field-export/>Copy a resource field into a ConfigMap or Secret</a></li><li><a class="docs-link rounded" href=https://aws-controllers-k8s.github.io/community/docs/user-docs/openshift/>Red Hat OpenShift</a></li><li><a class="docs-link rounded" href=https://aws-controllers-k8s.github.io/community/docs/user-docs/cleanup/>Uninstall an ACK Controller</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-tutorials aria-expanded=true>
Tutorials</button><div class="collapse show" id=section-tutorials><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aws-controllers-k8s.github.io/community/docs/tutorials/sagemaker-example/>Machine Learning with the ACK SageMaker Controller</a></li><li><a class="docs-link rounded" href=https://aws-controllers-k8s.github.io/community/docs/tutorials/autoscaling-example/>Scale SageMaker Workloads with Application Auto Scaling</a></li><li><a class="docs-link rounded" href=https://aws-controllers-k8s.github.io/community/docs/tutorials/rds-example/>Deploy PostgreSQL + MariaDB Instances Using the ACK RDS Controller</a></li><li><a class="docs-link rounded" href=https://aws-controllers-k8s.github.io/community/docs/tutorials/apigatewayv2-reference-example/>Manage HTTP APIs with the ACK APIGatewayv2 Controller</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-contributor aria-expanded=true>
Contributor Docs</button><div class="collapse show" id=section-contributor><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aws-controllers-k8s.github.io/community/docs/contributor-docs/overview/>Contribution Overview</a></li><li><a class="docs-link rounded" href=https://aws-controllers-k8s.github.io/community/docs/contributor-docs/tenets/>Project Tenets</a></li><li><a class="docs-link rounded" href=https://aws-controllers-k8s.github.io/community/docs/contributor-docs/code-generation/>Code Generation</a></li><li><a class="docs-link rounded" href=https://aws-controllers-k8s.github.io/community/docs/contributor-docs/code-organization/>Code Organization</a></li><li><a class="docs-link rounded active" href=https://aws-controllers-k8s.github.io/community/docs/contributor-docs/api-inference/>API Inference</a></li><li><a class="docs-link rounded" href=https://aws-controllers-k8s.github.io/community/docs/contributor-docs/setup/>Setup</a></li><li><a class="docs-link rounded" href=https://aws-controllers-k8s.github.io/community/docs/contributor-docs/building-controller/>Building a Controller</a></li><li><a class="docs-link rounded" href=https://aws-controllers-k8s.github.io/community/docs/contributor-docs/testing/>Testing</a></li><li><a class="docs-link rounded" href=https://aws-controllers-k8s.github.io/community/docs/contributor-docs/release/>Release</a></li></ul></div></li><li class=mb-1><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-discussion aria-expanded=true>
Discussion</button><div class="collapse show" id=section-discussion><ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small"><li><a class="docs-link rounded" href=https://aws-controllers-k8s.github.io/community/docs/community/background/>Background</a></li><li><a class="docs-link rounded" href=https://aws-controllers-k8s.github.io/community/docs/community/faq/>FAQ</a></li><li><a class="docs-link rounded" href=https://aws-controllers-k8s.github.io/community/docs/community/discussions/>Discussions</a></li></ul></div></li></ul></nav></div><nav class="docs-toc d-none d-xl-block col-xl-3" aria-label="Secondary navigation"><div class=page-links><h3>On this page</h3><hr><span class=small><nav id=TableOfContents><ul><li><a href=#the-kubernetes-resource-model>The Kubernetes Resource Model</a></li><li><a href=#which-things-become-ack-resources>Which things become ACK Resources?</a></li><li><a href=#how-is-an-ack-resource-defined>How is an ACK Resource Defined?</a><ul><li><a href=#determining-the-spec-fields>Determining the Spec fields</a></li><li><a href=#determining-the-status-fields>Determining the Status fields</a></li></ul></li></ul></nav></span></div></nav><main class="docs-content col-lg-11 col-xl-9"><h1>API Inference</h1><p class=lead></p><p>This document discusses how ACK introspects an AWS API model file and
determines which <code>CustomResourceDefinition</code>s (CRDs) to construct and what the
structure of those CRDs look like.</p><h2 id=the-kubernetes-resource-model>The Kubernetes Resource Model<a href=#the-kubernetes-resource-model class=anchor aria-hidden=true>#</a></h2><p>The <a href=https://kubernetes.io/docs/concepts/overview/working-with-objects/kubernetes-objects/>Kubernetes Resource Model</a> (KRM) is a set of <a href=https://github.com/kubernetes/community/blob/master/contributors/devel/sig-architecture/api-conventions.md>standards</a>
and naming conventions that govern how an <a href="https://kubernetes.io/docs/reference/glossary/?all=true#term-object"><code>Object</code></a> may be created and
updated.</p><p>An <code>Object</code> includes some metadata about the object &ndash; a
<a href=https://github.com/kubernetes/community/blob/master/contributors/devel/sig-architecture/api-conventions.md#resources><code>GroupVersionKind</code></a> (GVK), a <code>Name</code>, a <code>Namespace</code>, and zero or more <code>Labels</code>
and <code>Annotations</code>.</p><p>In addition to this metadata, each <code>Object</code> has a <code>Spec</code> field which is a
struct that contains the <strong>desired</strong> state of the <code>Object</code>. <code>Objects</code> are
typically denoted using YAML, like so:</p><pre><code class=language-yaml>apiVersion: s3.services.k8s.aws/v1alpha1
kind: Bucket
metadata:
  name: my-amazing-bucket
  annotations:
    pronounced-as: boo-kay
spec:
  name: my-amazing-bucket
</code></pre><div class="hint d-flex flex-column border-start my-4 border-4"><div class="hint-title p-2 flex flex-row flex-items-center">Manifests</div><div class="hint-body p-2 small">The YAML files containing an object definition like above are typically
called <a href="https://kubernetes.io/docs/reference/glossary/?fundamental=true#term-manifest"><strong>manifests</strong></a>.</div></div><p>Above, the <code>Object</code> has a GVK of &ldquo;s3.services.k8s.aws/v1alpha1:Bucket&rdquo; with an
<strong>internal-to-Kubernetes</strong> <code>Name</code> of &ldquo;my-amazing-bucket&rdquo; and a single
<code>Annotation</code> key/value pair &ldquo;pronounced-as: boo-kay&rdquo;.</p><p>The <code>Spec</code> field is a structure containing desired state fields about this
Bucket. You can see here that there is a <code>Spec.Name</code> field representing the
Bucket name that will be passed to the S3 CreateBucket API as the name of the
Bucket. Note that the <code>Metadata.Name</code> field value is the same as the
<code>Spec.Name</code> field value here, but there&rsquo;s nothing mandatory about this.</p><p>When a Kubernetes user creates an <code>Object</code>, typically by passing some YAML to
the <code>kubectl create</code> or <code>kubectl apply</code> CLI command, the Kubernetes API server
reads the manifest and determines whether the supplied contents are valid.</p><p>In order to determine if a manifest is valid, the Kubernetes API server must
look up the <strong>definition</strong> of the specified <code>GroupVersionKind</code>. For all of the
resources that ACK is concerned about, what this means is that the Kubernetes
API server will search for the <a href="https://kubernetes.io/docs/reference/glossary/?fundamental=true#term-CustomResourceDefinition"><code>CustomResourceDefinition</code></a> (CRD) matching
the <code>GroupVersionKind</code>.</p><p>This CRD describes the fields that comprise <code>Object</code>s of that particular
<code>GroupVersionKind</code> &ndash; called <code>CustomResources</code> (CRs).</p><p>In the next sections we discuss:</p><ul><li>how ACK determines what will become a CRD</li><li>how ACK determines the fields that go into each CRD&rsquo;s <code>Spec</code> and <code>Status</code></li></ul><h2 id=which-things-become-ack-resources>Which things become ACK Resources?<a href=#which-things-become-ack-resources class=anchor aria-hidden=true>#</a></h2><p>As mentioned in the <a href=../code-generation/>code generation documentation</a>, ACK reads AWS API
model files when generating its API types and controller implementations. These
model files are JSON files contain some important information about the
structure of the AWS service API, including a set of <em>Operation</em> definitions
(commonly called &ldquo;Actions&rdquo; in the official AWS API documentation) and a set of
<em>Shape</em> definitions.</p><p>Some AWS APIs have dozens (hundreds even!) of Operations exposed by the API.
Consider EC2&rsquo;s API. It has over <strong>400 separate Actions</strong>. Out of all those
Operations, how are we to tell which ones refer to something that we can model
as a Kubernetes <code>CustomResource</code>?</p><p>Well, we could look at the EC2 API&rsquo;s list of Operations and manually decide
which ones seem &ldquo;resource-y&rdquo;. Operations like &ldquo;AdvertiseByoipCidr&rdquo; and
&ldquo;AcceptTransitGatewayVpcAttachment&rdquo; don&rsquo;t seem very &ldquo;resource-y&rdquo;. Operations
like &ldquo;CreateKeyPair&rdquo; and &ldquo;DeleteKeyPair&rdquo;, however, do seem like they would
match a resource called &ldquo;KeyPair&rdquo;.</p><p>And this is actually how ACK decides what is a <code>CustomResource</code> and what isn&rsquo;t.</p><p>It uses a simple heuristic: <em>look through the list of Operations in the API
model file and filter out the ones that start with the string &ldquo;Create&rdquo;. If what
comes after the word &ldquo;Create&rdquo; describes a singular noun, then we create a
<code>CustomResource</code> of that <code>Kind</code></em>.</p><p>It really is that simple.</p><h2 id=how-is-an-ack-resource-defined>How is an ACK Resource Defined?<a href=#how-is-an-ack-resource-defined class=anchor aria-hidden=true>#</a></h2><p>Let&rsquo;s take a look at the <a href=https://github.com/aws/aws-controllers-k8s/blob/df6183acdc5b9b8508ea2fc8ec8c39fd19301ac6/services/s3/config/crd/bases/s3.services.k8s.aws_buckets.yaml>CRD for ACK&rsquo;s S3 Bucket</a> (the
<code>s3.services.k8s.aws/Bucket</code> <code>GroupKind</code> (GK)) (snipped slightly for brevity):</p><pre><code class=language-yaml>---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: buckets.s3.services.k8s.aws
spec:
  group: s3.services.k8s.aws
  names:
    kind: Bucket
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        description: Bucket is the Schema for the Buckets API
        properties:
          apiVersion:
            type: string
          kind:
            type: string
          metadata:
            type: object
          spec:
            description: BucketSpec defines the desired state of Bucket
            properties:
              acl:
                type: string
              createBucketConfiguration:
                properties:
                  locationConstraint:
                    type: string
                type: object
              grantFullControl:
                type: string
              grantRead:
                type: string
              grantReadACP:
                type: string
              grantWrite:
                type: string
              grantWriteACP:
                type: string
              name:
                type: string
              objectLockEnabledForBucket:
                type: boolean
            required:
            - name
            type: object
          status:
            description: BucketStatus defines the observed state of Bucket
            properties:
              ackResourceMetadata:
                properties:
                  arn:
                    type: string
                  ownerAccountID:
                    type: string
                required:
                - ownerAccountID
                type: object
              conditions:
                items:
                  properties:
                    lastTransitionTime:
                      format: date-time
                      type: string
                    message:
                      type: string
                    reason:
                      type: string
                    status:
                      type: string
                    type:
                      type: string
                  required:
                  - status
                  - type
                  type: object
                type: array
              location:
                type: string
            required:
            - ackResourceMetadata
            - conditions
            type: object
        type: object
</code></pre><p>The above YAML representation of a <code>CustomResourceDefinition</code> (CRD) is actually
generated from a set of Go type definitions. These Go type definitions live in
each ACK service&rsquo;s <code>services/$SERVICE/apis/$VERSION</code> directory.</p><p>This section of our documentation discusses how we create those Go type
definitions.</p><div class="hint d-flex flex-column border-start my-4 border-4"><div class="hint-title p-2 flex flex-row flex-items-center">controller-gen crd</div><div class="hint-body p-2 small">The OpenAPIv3 Validating Schema shown above is created by the
[<code>controller-gen crd</code>][cg] CLI command and is a convenient human-readable
representation of the <code>CustomResourceDefinition</code>.</div></div><p>The Bucket CR&rsquo;s <code>Spec</code> field is defined above as containing a set of fields &ndash;
&ldquo;acl&rdquo;, &ldquo;createBucketConfiguration&rdquo;, &ldquo;name&rdquo;, etc. Each field has a JSONSchema
type that corresponds with the Go type from the associated field member.</p><p>You will also notice that in addition to the definition of a <code>Spec</code> field,
there is also the definition of a <code>Status</code> field for the Bucket CRs. Above,
this <code>Status</code> contains fields that represent the &ldquo;observed&rdquo; state of the Bucket
CRs. The above shows three fields in the Bucket&rsquo;s <code>Status</code>:
<code>ackResourceMetadata</code>, <code>conditions</code> and <code>location</code>.</p><p>You might be wondering how the ACK code generator determined which fields go
into the Bucket&rsquo;s <code>Spec</code> and which fields go into the Bucket&rsquo;s <code>Status</code>?</p><p>Well, it&rsquo;s definitely not a manual process. Everything in ACK is code-generated
and discovered by inspecting the AWS API model files.</p><div class="hint d-flex flex-column border-start my-4 border-4 hint-info"><div class="hint-title p-2 flex flex-row flex-items-center">What are AWS API model files?</div><div class="hint-body p-2 small">The AWS API model files are JSON files that contain information about a
particular AWS service API&rsquo;s Actions and Shapes. We consume the model files
[distributed][aws-sdk-go-model-files] in the <code>aws-sdk-go</code> project. (Look
for the <code>api-2.json</code> files in the linked service-specific directories&mldr;)</div></div><p>Let&rsquo;s take a look at a tiny bit of the <a href=https://github.com/aws-controllers-k8s/code-generator/blob/main/pkg/testdata/models/apis/s3/0000-00-00/api-2.json>AWS S3 API model file</a> and
you can start to see how we identify the things that go into the <code>Spec</code> and
<code>Status</code> fields.</p><pre><code class=language-json>{
  &quot;metadata&quot;:{
    &quot;serviceId&quot;:&quot;S3&quot;,
  },
  &quot;operations&quot;:{
    &quot;CreateBucket&quot;:{
      &quot;name&quot;:&quot;CreateBucket&quot;,
      &quot;http&quot;:{
        &quot;method&quot;:&quot;PUT&quot;,
        &quot;requestUri&quot;:&quot;/{Bucket}&quot;
      },
      &quot;input&quot;:{&quot;shape&quot;:&quot;CreateBucketRequest&quot;},
      &quot;output&quot;:{&quot;shape&quot;:&quot;CreateBucketOutput&quot;},
    },
  },
  &quot;shapes&quot;:{
    &quot;BucketCannedACL&quot;:{
      &quot;type&quot;:&quot;string&quot;,
      &quot;enum&quot;:[
        &quot;private&quot;,
        &quot;public-read&quot;,
        &quot;public-read-write&quot;,
        &quot;authenticated-read&quot;
      ]
    },
    &quot;BucketName&quot;:{&quot;type&quot;:&quot;string&quot;},
    &quot;CreateBucketConfiguration&quot;:{
      &quot;type&quot;:&quot;structure&quot;,
      &quot;members&quot;:{
        &quot;LocationConstraint&quot;:{&quot;shape&quot;:&quot;BucketLocationConstraint&quot;}
      }
    },
    &quot;CreateBucketOutput&quot;:{
      &quot;type&quot;:&quot;structure&quot;,
      &quot;members&quot;:{
        &quot;Location&quot;:{
          &quot;shape&quot;:&quot;Location&quot;,
        }
      }
    },
    &quot;CreateBucketRequest&quot;:{
      &quot;type&quot;:&quot;structure&quot;,
      &quot;required&quot;:[&quot;Bucket&quot;],
      &quot;members&quot;:{
        &quot;ACL&quot;:{
          &quot;shape&quot;:&quot;BucketCannedACL&quot;,
        },
        &quot;Bucket&quot;:{
          &quot;shape&quot;:&quot;BucketName&quot;,
        },
        &quot;CreateBucketConfiguration&quot;:{
          &quot;shape&quot;:&quot;CreateBucketConfiguration&quot;,
        },
        &quot;GrantFullControl&quot;:{
          &quot;shape&quot;:&quot;GrantFullControl&quot;,
        },
        &quot;GrantRead&quot;:{
          &quot;shape&quot;:&quot;GrantRead&quot;,
        },
        &quot;GrantReadACP&quot;:{
          &quot;shape&quot;:&quot;GrantReadACP&quot;,
        },
        &quot;GrantWrite&quot;:{
          &quot;shape&quot;:&quot;GrantWrite&quot;,
        },
        &quot;GrantWriteACP&quot;:{
          &quot;shape&quot;:&quot;GrantWriteACP&quot;,
        },
        &quot;ObjectLockEnabledForBucket&quot;:{
          &quot;shape&quot;:&quot;ObjectLockEnabledForBucket&quot;,
        }
      },
    },
  }
}
</code></pre><p>As mentioned above, we determine what things in an API are
<code>CustomResourceDefinition</code>s by looking for <code>Operation</code>s that begin with the
string &ldquo;Create&rdquo; and where the remainder of the <code>Operation</code> name refers to a
<em>singular</em> noun.</p><p>For the S3 API, there happens to be only a single Operation that begins with
the string &ldquo;Create&rdquo;, and it happens to be &ldquo;<a href=https://docs.aws.amazon.com/AmazonS3/latest/API/API_CreateBucket.html>CreateBucket</a>&rdquo;.
And since &ldquo;Bucket&rdquo; refers to a singular noun, that is the
<code>CustomResourceDefinition</code> that is identified by the ACK code generator.</p><p>The ACK code generator writes a file <a href=https://github.com/aws/aws-controllers-k8s/blob/a10e9fc4f201129765260fa4f6751a6c9421bc31/services/s3/apis/v1alpha1/bucket.go><code>apis/v1alpha1/bucket.go</code></a>
that contains a <code>BucketSpec</code> struct definition, a <code>BucketStatus</code> struct
definition and a <code>Bucket</code> struct definition that ties the Spec and Status
together into our CRD.</p><p>In determining the structure of the <code>s3.services.k8s.aws/Bucket</code> CRD, the ACK
code generator inspects the <code>Shape</code>s referred to by the &ldquo;input&rdquo; and &ldquo;output&rdquo;
members of the &ldquo;CreateBucket&rdquo; <code>Operation</code>: &ldquo;CreateBucketRequest&rdquo; and
&ldquo;CreateBucketOutput&rdquo; respectively.</p><h3 id=determining-the-spec-fields>Determining the Spec fields<a href=#determining-the-spec-fields class=anchor aria-hidden=true>#</a></h3><p>For the <code>BucketSpec</code> fields, we grab members of the <code>Input</code> shape. The
<a href=https://github.com/aws/aws-controllers-k8s/blob/a10e9fc4f201129765260fa4f6751a6c9421bc31/services/s3/apis/v1alpha1/bucket.go#L23-L35>generated Go type definition</a> for the <code>BucketSpec</code> ends up looking
like this:</p><pre><code class=language-go>// BucketSpec defines the desired state of Bucket
type BucketSpec struct {
	ACL                       *string                    `json:&quot;acl,omitempty&quot;`
	CreateBucketConfiguration *CreateBucketConfiguration `json:&quot;createBucketConfiguration,omitempty&quot;`
	GrantFullControl          *string                    `json:&quot;grantFullControl,omitempty&quot;`
	GrantRead                 *string                    `json:&quot;grantRead,omitempty&quot;`
	GrantReadACP              *string                    `json:&quot;grantReadACP,omitempty&quot;`
	GrantWrite                *string                    `json:&quot;grantWrite,omitempty&quot;`
	GrantWriteACP             *string                    `json:&quot;grantWriteACP,omitempty&quot;`
	// +kubebuilder:validation:Required
	Name                       *string `json:&quot;name&quot;`
	ObjectLockEnabledForBucket *bool   `json:&quot;objectLockEnabledForBucket,omitempty&quot;`
}
</code></pre><p>Let&rsquo;s take a closer look at the <code>BucketSpec</code> fields.</p><p>The <code>ACL</code>, <code>GrantFullControl</code>, <code>GrantRead</code>, <code>GrantReadACP</code>, <code>GrantWrite</code> and
<code>GrantWriteACP</code> fields are simple <code>*string</code> types. However, if we look at the
<code>CreateBucketRequest</code> Shape definition in the API model file, we see that these
fields actually are differently-named Shapes, not <code>*string</code>. Why is this? Well,
the ACK code generator &ldquo;flattens&rdquo; some Shapes when it notices that a named
Shape is just an alias for a simple scalar type (like <code>*string</code>).</p><div class="hint d-flex flex-column border-start my-4 border-4 hint-info"><div class="hint-title p-2 flex flex-row flex-items-center">Why <code>*string</code>?</div><div class="hint-body p-2 small">The astute reader may be wondering why the Go type for string fields is
<code>*string</code> and not <code>string</code>. The reason for this lies in <code>aws-sdk-go</code>. All
types for all Shape members are pointer types, even when the underlying
data type is a simple scalar type like <code>bool</code> or <code>int</code>. Yes, even when
the field is required&mldr;</div></div><p>Note that even though the <code>ACL</code> field has a Shape of <code>BucketCannedACL</code>, that
Shape is actually just a <code>string</code> with a set of enumerated values. Enumerated
values are collected and written out by the ACK code generator into an
<a href=https://github.com/aws/aws-controllers-k8s/blob/a10e9fc4f201129765260fa4f6751a6c9421bc31/services/s3/apis/v1alpha1/enums.go><code>apis/v1alpha1/enums.go</code></a> file, with content like this:</p><pre><code class=language-go>type BucketCannedACL string

const (
	BucketCannedACL_private            BucketCannedACL = &quot;private&quot;
	BucketCannedACL_public_read        BucketCannedACL = &quot;public-read&quot;
	BucketCannedACL_public_read_write  BucketCannedACL = &quot;public-read-write&quot;
	BucketCannedACL_authenticated_read BucketCannedACL = &quot;authenticated-read&quot;
)
</code></pre><p>The <code>CreateBucketConfiguration</code> field is of type <code>*CreateBucketConfiguration</code>.
All this means is that the field refers to a nested struct. All struct type
definitions for CRD Spec or Status field members are placed by the ACK code
generator into a <a href=https://github.com/aws/aws-controllers-k8s/blob/a10e9fc4f201129765260fa4f6751a6c9421bc31/services/s3/apis/v1alpha1/types.go><code>apis/v1alpha1/types.go</code></a> file.</p><p>Here is a <a href=https://github.com/aws/aws-controllers-k8s/blob/a10e9fc4f201129765260fa4f6751a6c9421bc31/services/s3/apis/v1alpha1/types.go#L36-L38>snippet</a> of that file that contains the type definition for
the <code>CreateBucketConfiguration</code> struct:</p><pre><code class=language-go>type CreateBucketConfiguration struct {
	LocationConstraint *string `json:&quot;locationConstraint,omitempty&quot;`
}
</code></pre><p>Now, the <code>Name</code> field in the <code>BucketSpec</code> struct seems out of place, no? There
is no &ldquo;Name&rdquo; member of the <code>CreateBucketRequest</code> Shape, so why is there a
<code>Name</code> field in <code>BucketSpec</code>?</p><p>Well, this is an example of ACK&rsquo;s code generator using some special
instructions contained in something called the <code>generator.yaml</code> (or &ldquo;generator
config&rdquo;) for the S3 service controller.</p><p>Each service in the <code>services/</code> directory can have a <code>generator.yaml</code> file that
contains overrides and special instructions for how to interpret and transform
parts of the service&rsquo;s API.</p><p>Here is part of the <a href=https://github.com/aws/aws-controllers-k8s/blob/a10e9fc4f201129765260fa4f6751a6c9421bc31/services/s3/generator.yaml>S3 service&rsquo;s <code>generator.yaml</code></a> file:</p><pre><code class=language-yaml>resources:
  Bucket:
    renames:
      operations:
        CreateBucket:
          input_fields:
            Bucket: Name
</code></pre><p>As you can see, the generator config for the ACK S3 service controller is
renaming the <code>CreateBucket</code> Operation&rsquo;s Input Shape <code>Bucket</code> field to <code>Name</code>.
We do this for some APIs to add a little consistency and a more
Kubernetes-native experience for the CRDs. In Kubernetes, there is a
<code>Metadata.Name</code> (internal Kubernetes name) and there is typically a <code>Spec.Name</code>
field which refers to the <strong>external</strong> Name of the resource. So, in order to
align the <code>s3.services.k8s.aws/Bucket</code>&rsquo;s definition to be more Kubernetes-like,
we rename the <code>Bucket</code> field to <code>Name</code>.</p><p>We do this renaming for other things that produce a bit of a
&ldquo;<a href=https://github.com/aws/aws-sdk-go/blob/master/private/model/api/legacy_stutter.go>stutter</a>&rdquo;, as well as where the name of a field does not conform to
Go exported name constraints or <a href=https://golang.org/doc/effective_go.html#names>naming best practices</a>.</p><h3 id=determining-the-status-fields>Determining the Status fields<a href=#determining-the-status-fields class=anchor aria-hidden=true>#</a></h3><p>Remember that fields in a CR&rsquo;s <code>Status</code> struct are not mutable by normal
Kubernetes users. Instead, these fields represent the latest observed state of
a resource (instead of the <em>desired</em> state of that resource which is
represented by fields in the CR&rsquo;s <code>Spec</code> struct).</p><p>The ACK code generator takes the members of the Create <code>Operation</code>&rsquo;s <code>Output</code>
shape and puts those fields into the CR&rsquo;s <code>Status</code> struct.</p><p>We assume that fields in the <code>Output</code> that have the same name as fields in the
<code>Input</code> shape for the Create <code>Operation</code> refer to the resource field that was
set in the <code>Spec</code> field and therefore <strong>are only interested in fields in the
<code>Output</code> that are not in the <code>Input</code></strong>.</p><p>Looking at the <code>BucketSpec</code> struct definition that was generated after
processing the S3 API model file, we find <a href=https://github.com/aws/aws-controllers-k8s/blob/a10e9fc4f201129765260fa4f6751a6c9421bc31/services/s3/apis/v1alpha1/bucket.go#L37-L49>this</a>:</p><pre><code class=language-go>// BucketStatus defines the observed state of Bucket
type BucketStatus struct {
	// All CRs managed by ACK have a common `Status.ACKResourceMetadata` member
	// that is used to contain resource sync state, account ownership,
	// constructed ARN for the resource
	ACKResourceMetadata *ackv1alpha1.ResourceMetadata `json:&quot;ackResourceMetadata&quot;`
	// All CRS managed by ACK have a common `Status.Conditions` member that
	// contains a collection of `ackv1alpha1.Condition` objects that describe
	// the various terminal states of the CR and its backend AWS service API
	// resource
	Conditions []*ackv1alpha1.Condition `json:&quot;conditions&quot;`
	Location   *string                  `json:&quot;location,omitempty&quot;`
}
</code></pre><p>Let&rsquo;s discuss each of the fields shown above.</p><p>First, the <code>ACKResourceMetadata</code> field is included in <strong>every ACK CRD&rsquo;s Status
field</strong>. It is a pointer to a <a href=https://github.com/aws/aws-controllers-k8s/blob/a10e9fc4f201129765260fa4f6751a6c9421bc31/apis/core/v1alpha1/resource_metadata.go#L16-L33><code>ackv1alpha1.ResourceMetadata</code></a> struct.
This struct contains some standard and important pieces of information about
the resource, including the AWS Resource Name (ARN) and the Owner AWS Account
ID.</p><p>The ARN is a globally-unique identifier for the resource in AWS. The Owner AWS
Account ID is the 12-digit AWS account ID that is billed for the resource.</p><div class="hint d-flex flex-column border-start my-4 border-4 hint-info"><div class="hint-title p-2 flex flex-row flex-items-center">Cross-account resource management</div><div class="hint-body p-2 small">The Owner AWS Account ID for a resource <a href=../../user-docs/authorization/#create-resource-in-different-aws-accounts>may be different</a> from the
AWS Account ID of the IAM Role that the ACK service controller is executing
under.</div></div><p>The <code>Conditions</code> field is also included in every ACK CRD&rsquo;s Status field. It is
a slice of pointers to <a href=https://github.com/aws/aws-controllers-k8s/blob/a10e9fc4f201129765260fa4f6751a6c9421bc31/apis/core/v1alpha1/conditions.go#L37-L54><code>ackv1alpha1.Condition</code></a> structs. The
<code>Condition</code> struct is responsible for conveying information about the latest
observed sync state of a resource, including any terminal condition states that
cause the resource to be &ldquo;unsyncable&rdquo;.</p><p>Next is the <code>Location</code> field. This field gets its definition from the S3
<code>CreateBucketOutput.Location</code> field:</p><pre><code class=language-json>    &quot;CreateBucketOutput&quot;:{
      &quot;type&quot;:&quot;structure&quot;,
      &quot;members&quot;:{
        &quot;Location&quot;:{
          &quot;shape&quot;:&quot;Location&quot;,
        }
      }
    },
</code></pre><p class=edit-page><a href=https://github.com/aws-controllers-k8s/community/blob/main/docs/content/docs/contributor-docs/api-inference.md><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-edit-2"><path d="M17 3a2.828 2.828.0 114 4L7.5 20.5 2 22l1.5-5.5L17 3z"/></svg>Edit this page on GitHub</a></p><div class=my-n3></div></main></div></div></div><footer class="footer mt-auto text-muted"><div class=container><div class=row><div class="col-lg-8 order-last order-lg-first"><ul class=list-inline><li class=list-inline-item>Powered by <a href=https://gohugo.io/>Hugo</a> and <a href=https://getdoks.org/>Doks</a></li></ul></div><div class="col-lg-8 order-first order-lg-last text-lg-end"><ul class=list-inline></ul></div></div></div></footer><script src=https://aws-controllers-k8s.github.io/community/js/bootstrap.min.586171fec3966d1a44fa8aa2edb24b861dc3a72be8cc24aa4e0dabe4c312a0dae5fe1eaa7c93180a6211fa4d7c5461b0d228fdf741be2eae279a376dfa1e7d81.js integrity="sha512-WGFx/sOWbRpE+oqi7bJLhh3DpyvozCSqTg2r5MMSoNrl/h6qfJMYCmIR+k18VGGw0ij990G+Lq4nmjdt+h59gQ==" crossorigin=anonymous defer></script>
<script src=https://aws-controllers-k8s.github.io/community/js/highlight.min.b9c3f53f62ede0586acf2866d3772ea55bf34115611a96523af51b289a2a58f9f60b82ffd4103276a6adc1a3bc7113c6ead0cf0799144d35605ff1e9108981bc.js integrity="sha512-ucP1P2Lt4Fhqzyhm03cupVvzQRVhGpZSOvUbKJoqWPn2C4L/1BAydqatwaO8cRPG6tDPB5kUTTVgX/HpEImBvA==" crossorigin=anonymous defer></script>
<script src=https://aws-controllers-k8s.github.io/community/main.min.9c6d482447eb496eee3c5e1780774eb90b6fe59f101089e8e9842339dc25fc244038c31f89bb5352fa6d43b7916b0e8edcfebd60ead52c87834493c8c06a53b3.js integrity="sha512-nG1IJEfrSW7uPF4XgHdOuQtv5Z8QEIno6YQjOdwl/CRAOMMfibtTUvptQ7eRaw6O3P69YOrVLIeDRJPIwGpTsw==" crossorigin=anonymous defer></script>
<script src=https://aws-controllers-k8s.github.io/community/index.min.4ed79ba340edca6966eef36dfb0ef5b36084aa0a56a3a21bcf67a2dc59fb7313aac8ffbc8a5235ea410e4a65a537fd83ab2b2027afe705db3f147c7809ac9ddf.js integrity="sha512-Ttebo0Dtymlm7vNt+w71s2CEqgpWo6Ibz2ei3Fn7cxOqyP+8ilI16kEOSmWlN/2DqysgJ6/nBds/FHx4Cayd3w==" crossorigin=anonymous defer></script></body></html>